"no use strict";function initBaseUrls(topLevelNamespaces){require.tlns=topLevelNamespaces}function initSender(){var EventEmitter=require(null,"ace/lib/event_emitter").EventEmitter,oop=require(null,"ace/lib/oop"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:"call",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:"event",name:name,data:data})}}.call(Sender.prototype),new Sender}var console={log:function(msgs){postMessage({type:"log",data:arguments.join(" ")})}},window={console:console},normalizeModule=function(parentId,moduleName){if(moduleName.indexOf("!")!==-1){var chunks=moduleName.split("!");return normalizeModule(parentId,chunks[0])+"!"+normalizeModule(parentId,chunks[1])}if(moduleName.charAt(0)=="."){var base=parentId.split("/").slice(0,-1).join("/"),moduleName=base+"/"+moduleName;while(moduleName.indexOf(".")!==-1&&previous!=moduleName)var previous=moduleName,moduleName=moduleName.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return moduleName},require=function(parentId,id){if(!id.charAt)throw new Error("worker.js require() accepts only (parentId, id) as arguments");var id=normalizeModule(parentId,id),module=require.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;var chunks=id.split("/");chunks[0]=require.tlns[chunks[0]]||chunks[0];var path=chunks.join("/")+".js";return require.id=id,importScripts(path),require(parentId,id)};require.modules={},require.tlns={};var define=function(id,deps,factory){arguments.length==2?(factory=deps,typeof id!="string"&&(deps=id,id=require.id)):arguments.length==1&&(factory=id,id=require.id);if(id.indexOf("text!")===0)return;var req=function(deps,factory){return require(id,deps,factory)};require.modules[id]={factory:function(){var module={exports:{}},returnExports=factory(req,module.exports,module);return returnExports&&(module.exports=returnExports),module}}},main,sender;onmessage=function(e){var msg=e.data;if(msg.command)main[msg.command].apply(main,msg.args);else if(msg.init){initBaseUrls(msg.tlns),require(null,"ace/lib/fixoldbrowsers"),sender=initSender();var clazz=require(null,msg.module)[msg.classname];main=new clazz(sender)}else msg.event&&sender&&sender._emit(msg.event,msg.data)},define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(require,exports,module){require("./regexp"),require("./es5-shim")}),define("ace/lib/regexp",["require","exports","module"],function(require,exports,module){function getNativeFlags(regex){return(regex.global?"g":"")+(regex.ignoreCase?"i":"")+(regex.multiline?"m":"")+(regex.extended?"x":"")+(regex.sticky?"y":"")}function indexOf(array,item,from){if(Array.prototype.indexOf)return array.indexOf(item,from);for(var i=from||0;i<array.length;i++)if(array[i]===item)return i;return-1}var real={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},compliantExecNpcg=real.exec.call(/()??/,"")[1]===undefined,compliantLastIndexIncrement=function(){var x=/^/g;return real.test.call(x,""),!x.lastIndex}();if(compliantLastIndexIncrement&&compliantExecNpcg)return;RegExp.prototype.exec=function(str){var match=real.exec.apply(this,arguments),name,r2;if(typeof str=="string"&&match){!compliantExecNpcg&&match.length>1&&indexOf(match,"")>-1&&(r2=RegExp(this.source,real.replace.call(getNativeFlags(this),"g","")),real.replace.call(str.slice(match.index),r2,function(){for(var i=1;i<arguments.length-2;i++)arguments[i]===undefined&&(match[i]=undefined)}));if(this._xregexp&&this._xregexp.captureNames)for(var i=1;i<match.length;i++)name=this._xregexp.captureNames[i-1],name&&(match[name]=match[i]);!compliantLastIndexIncrement&&this.global&&!match[0].length&&this.lastIndex>match.index&&this.lastIndex--}return match},compliantLastIndexIncrement||(RegExp.prototype.test=function(str){var match=real.exec.call(this,str);return match&&this.global&&!match[0].length&&this.lastIndex>match.index&&this.lastIndex--,!!match})}),define("ace/lib/es5-shim",["require","exports","module"],function(require,exports,module){function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){}}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if(typeof target!="function")throw new TypeError;var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F,result=target.apply(self,args.concat(slice.call(arguments)));return result!==null&&Object(result)===result?result:self}return target.apply(that,args.concat(slice.call(arguments)))};return bound});var call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty),defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors;if(supportsAccessors=owns(prototypeOfObject,"__defineGetter__"))defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__);Array.isArray||(Array.isArray=function(obj){return toString(obj)=="[object Array]"}),Array.prototype.forEach||(Array.prototype.forEach=function(fun){var self=toObject(this),thisp=arguments[1],i=0,length=self.length>>>0;if(toString(fun)!="[object Function]")throw new TypeError;while(i<length)i in self&&fun.call(thisp,self[i],i,self),i++}),Array.prototype.map||(Array.prototype.map=function(fun){var self=toObject(this),length=self.length>>>0,result=Array(length),thisp=arguments[1];if(toString(fun)!="[object Function]")throw new TypeError;for(var i=0;i<length;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,self));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var self=toObject(this),length=self.length>>>0,result=[],thisp=arguments[1];if(toString(fun)!="[object Function]")throw new TypeError;for(var i=0;i<length;i++)i in self&&fun.call(thisp,self[i],i,self)&&result.push(self[i]);return result}),Array.prototype.every||(Array.prototype.every=function(fun){var self=toObject(this),length=self.length>>>0,thisp=arguments[1];if(toString(fun)!="[object Function]")throw new TypeError;for(var i=0;i<length;i++)if(i in self&&!fun.call(thisp,self[i],i,self))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var self=toObject(this),length=self.length>>>0,thisp=arguments[1];if(toString(fun)!="[object Function]")throw new TypeError;for(var i=0;i<length;i++)if(i in self&&fun.call(thisp,self[i],i,self))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var self=toObject(this),length=self.length>>>0;if(toString(fun)!="[object Function]")throw new TypeError;if(!length&&arguments.length==1)throw new TypeError;var i=0,result;if(arguments.length>=2)result=arguments[1];else do{if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError}while(!0);for(;i<length;i++)i in self&&(result=fun.call(void 0,result,self[i],i,self));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var self=toObject(this),length=self.length>>>0;if(toString(fun)!="[object Function]")throw new TypeError;if(!length&&arguments.length==1)throw new TypeError;var result,i=length-1;if(arguments.length>=2)result=arguments[1];else do{if(i in self){result=self[i--];break}if(--i<0)throw new TypeError}while(!0);do i in this&&(result=fun.call(void 0,result,self[i],i,self));while(i--);return result}),Array.prototype.indexOf||(Array.prototype.indexOf=function(sought){var self=toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);for(;i<length;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(sought){var self=toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);for(;i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)});if(!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(object,property){if(typeof object!="object"&&typeof object!="function"||object===null)throw new TypeError(ERR_NON_OBJECT+object);if(!owns(object,property))return;var descriptor,getter,setter;descriptor={enumerable:!0,configurable:!0};if(supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);object.__proto__=prototype;if(getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),Object.create||(Object.create=function(prototype,properties){var object;if(prototype===null)object={__proto__:null};else{if(typeof prototype!="object")throw new TypeError("typeof prototype["+typeof prototype+"] != 'object'");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return properties!==void 0&&Object.defineProperties(object,properties),object});if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom=typeof document=="undefined"||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ",ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ",ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(object,property,descriptor){if(typeof object!="object"&&typeof object!="function"||object===null)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if(typeof descriptor!="object"&&typeof descriptor!="function"||descriptor===null)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,"value"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,"get")&&defineGetter(object,property,descriptor.get),owns(descriptor,"set")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return typeof object=="function"?object:freezeObject(object)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(object){return!1}),Object.isFrozen||(Object.isFrozen=function(object){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;var name="";while(owns(object,name))name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue});if(!Object.keys){var hasDontEnumBug=!0,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function e(object){if(typeof object!="object"&&typeof object!="function"||object===null)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;i<ii;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}if(!Date.prototype.toISOString||(new Date(-621987552e5)).toISOString().indexOf("-000001")===-1)Date.prototype.toISOString=function(){var result,length,value,year;if(!isFinite(this))throw new RangeError;result=[this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],year=this.getUTCFullYear(),year=(year<0?"-":year>9999?"+":"")+("00000"+Math.abs(year)).slice(0<=year&&year<=9999?-4:-6),length=result.length;while(length--)value=result[length],value<10&&(result[length]="0"+value);return year+"-"+result.slice(0,2).join("-")+"T"+result.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"};Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toJSON||(Date.prototype.toJSON=function(key){if(typeof this.toISOString!="function")throw new TypeError;return this.toISOString()}),Date.parse("+275760-09-13T00:00:00.000Z")!==864e13&&(Date=function(NativeDate){var Date=function e(Y,M,D,h,m,s,ms){var length=arguments.length;if(this instanceof NativeDate){var date=length==1&&String(Y)===Y?new NativeDate(Date.parse(Y)):length>=7?new NativeDate(Y,M,D,h,m,s,ms):length>=6?new NativeDate(Y,M,D,h,m,s):length>=5?new NativeDate(Y,M,D,h,m):length>=4?new NativeDate(Y,M,D,h):length>=3?new NativeDate(Y,M,D):length>=2?new NativeDate(Y,M):length>=1?new NativeDate(Y):new NativeDate;return date.constructor=Date,date}return NativeDate.apply(this,arguments)},isoDateExpression=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$");for(var key in NativeDate)Date[key]=NativeDate[key];return Date.now=NativeDate.now,Date.UTC=NativeDate.UTC,Date.prototype=NativeDate.prototype,Date.prototype.constructor=Date,Date.parse=function(string){var match=isoDateExpression.exec(string);if(match){match.shift();for(var i=1;i<7;i++)match[i]=+(match[i]||(i<3?1:0)),i==1&&match[i]--;var minuteOffset=+match.pop(),hourOffset=+match.pop(),sign=match.pop(),offset=0;if(sign){if(hourOffset>23||minuteOffset>59)return NaN;offset=(hourOffset*60+minuteOffset)*6e4*(sign=="+"?-1:1)}var year=+match[0];return 0<=year&&year<=99?(match[0]=year+400,NativeDate.UTC.apply(this,match)+offset-126227808e5):NativeDate.UTC.apply(this,match)+offset}return NativeDate.parse.apply(this,arguments)},Date}(Date));var ws="	\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||ws.trim()){ws="["+ws+"]";var trimBeginRegexp=new RegExp("^"+ws+ws+"*"),trimEndRegexp=new RegExp(ws+ws+"*$");String.prototype.trim=function(){return String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}}var toInteger=function(n){return n=+n,n!==n?n=0:n!==0&&n!==1/0&&n!==-Infinity&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n},prepareString="a"[0]!="a",toObject=function(o){if(o==null)throw new TypeError;return prepareString&&typeof o=="string"&&o?o.split(""):Object(o)}}),define("ace/lib/event_emitter",["require","exports","module"],function(require,exports,module){var EventEmitter={};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry=this._eventRegistry||{},this._defaultHandlers=this._defaultHandlers||{};var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(!listeners.length&&!defaultHandler)return;if(typeof e!="object"||!e)e={};e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=function(){this.propagationStopped=!0}),e.preventDefault||(e.preventDefault=function(){this.defaultPrevented=!0});for(var i=0;i<listeners.length;i++){listeners[i](e);if(e.propagationStopped)break}if(defaultHandler&&!e.defaultPrevented)return defaultHandler(e)},EventEmitter.setDefaultHandler=function(eventName,callback){this._defaultHandlers=this._defaultHandlers||{};if(this._defaultHandlers[eventName])throw new Error("The default handler for '"+eventName+"' is already set");this._defaultHandlers[eventName]=callback},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];listeners||(listeners=this._eventRegistry[eventName]=[]),listeners.indexOf(callback)==-1&&listeners.push(callback)},EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(!listeners)return;var index=listeners.indexOf(callback);index!==-1&&listeners.splice(index,1)},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),define("ace/lib/oop",["require","exports","module"],function(require,exports,module){exports.inherits=function(){var tempCtor=function(){};return function(ctor,superCtor){tempCtor.prototype=superCtor.prototype,ctor.super_=superCtor.prototype,ctor.prototype=new tempCtor,ctor.prototype.constructor=ctor}}(),exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key]},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),define("ace/mode/javascript_worker",["require","exports","module","ace/lib/oop","ace/worker/mirror","ace/worker/jshint","ace/narcissus/parser"],function(require,exports,module){var oop=require("../lib/oop"),Mirror=require("../worker/mirror").Mirror,lint=require("../worker/jshint").JSHINT,parser=require("../narcissus/parser"),JavaScriptWorker=exports.JavaScriptWorker=function(sender){Mirror.call(this,sender),this.setTimeout(500)};oop.inherits(JavaScriptWorker,Mirror),function(){this.onUpdate=function(){var value=this.doc.getValue();value=value.replace(/^#!.*\n/,"\n");try{parser.parse(value)}catch(e){var chunks=e.message.split(":"),message=chunks.pop().trim(),lineNumber=parseInt(chunks.pop().trim())-1;this.sender.emit("narcissus",{row:lineNumber,column:null,text:message,type:"error"});return}finally{}lint(value,{undef:!1,onevar:!1,passfail:!1}),this.sender.emit("jslint",lint.errors)}}.call(JavaScriptWorker.prototype)}),define("ace/worker/mirror",["require","exports","module","ace/document","ace/lib/lang"],function(require,exports,module){var Document=require("../document").Document,lang=require("../lib/lang"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(""),deferredUpdate=this.deferredUpdate=lang.deferredCall(this.onUpdate.bind(this)),_self=this;sender.on("change",function(e){doc.applyDeltas([e.data]),deferredUpdate.schedule(_self.$timeout)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){}}).call(Mirror.prototype)}),define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(require,exports,module){var oop=require("./lib/oop"),EventEmitter=require("./lib/event_emitter").EventEmitter,Range=require("./range").Range,Anchor=require("./anchor").Anchor,Document=function(text){this.$lines=[],text.length==0?this.$lines=[""]:Array.isArray(text)?this.insertLines(0,text):this.insert({row:0,column:0},text)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength();this.remove(new Range(0,0,len,this.getLine(len-1).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},"aaa".split(/a/).length==0?this.$split=function(text){return text.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(text){return text.split(/\r\n|\r|\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\r\n|\r|\n)/m);match?this.$autoNewLine=match[1]:this.$autoNewLine="\n"},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";case"auto":return this.$autoNewLine}},this.$autoNewLine="\n",this.$newLineMode="auto",this.setNewLineMode=function(newLineMode){if(this.$newLineMode===newLineMode)return;this.$newLineMode=newLineMode},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return text=="\r\n"||text=="\r"||text=="\n"},this.getLine=function(row){return this.$lines[row]||""},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){if(range.start.row==range.end.row)return this.$lines[range.start.row].substring(range.start.column,range.end.column);var lines=this.getLines(range.start.row+1,range.end.row-1);return lines.unshift((this.$lines[range.start.row]||"").substring(range.start.column)),lines.push((this.$lines[range.end.row]||"").substring(0,range.end.column)),lines.join(this.getNewLineCharacter())},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length&&(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length),position},this.insert=function(position,text){if(!text||text.length===0)return position;position=this.$clipPosition(position),this.getLength()<=1&&this.$detectNewLine(text);var lines=this.$split(text),firstLine=lines.splice(0,1)[0],lastLine=lines.length==0?null:lines.splice(lines.length-1,1)[0];return position=this.insertInLine(position,firstLine),lastLine!==null&&(position=this.insertNewLine(position),position=this.insertLines(position.row,lines),position=this.insertInLine(position,lastLine||"")),position},this.insertLines=function(row,lines){if(lines.length==0)return{row:row,column:0};if(lines.length>65535){var end=this.insertLines(row,lines.slice(65535));lines=lines.slice(0,65535)}var args=[row,0];args.push.apply(args,lines),this.$lines.splice.apply(this.$lines,args);var range=new Range(row,0,row+lines.length,0),delta={action:"insertLines",range:range,lines:lines};return this._emit("change",{data:delta}),end||range.end},this.insertNewLine=function(position){position=this.$clipPosition(position);var line=this.$lines[position.row]||"";this.$lines[position.row]=line.substring(0,position.column),this.$lines.splice(position.row+1,0,line.substring(position.column,line.length));var end={row:position.row+1,column:0},delta={action:"insertText",range:Range.fromPoints(position,end),text:this.getNewLineCharacter()};return this._emit("change",{data:delta}),end},this.insertInLine=function(position,text){if(text.length==0)return position;var line=this.$lines[position.row]||"";this.$lines[position.row]=line.substring(0,position.column)+text+line.substring(position.column);var end={row:position.row,column:position.column+text.length},delta={action:"insertText",range:Range.fromPoints(position,end),text:text};return this._emit("change",{data:delta}),end},this.remove=function(range){range.start=this.$clipPosition(range.start),range.end=this.$clipPosition(range.end);if(range.isEmpty())return range.start;var firstRow=range.start.row,lastRow=range.end.row;if(range.isMultiLine()){var firstFullRow=range.start.column==0?firstRow:firstRow+1,lastFullRow=lastRow-1;range.end.column>0&&this.removeInLine(lastRow,0,range.end.column),lastFullRow>=firstFullRow&&this.removeLines(firstFullRow,lastFullRow),firstFullRow!=firstRow&&(this.removeInLine(firstRow,range.start.column,this.getLine(firstRow).length),this.removeNewLine(range.start.row))}else this.removeInLine(firstRow,range.start.column,range.end.column);return range.start},this.removeInLine=function(row,startColumn,endColumn){if(startColumn==endColumn)return;var range=new Range(row,startColumn,row,endColumn),line=this.getLine(row),removed=line.substring(startColumn,endColumn),newLine=line.substring(0,startColumn)+line.substring(endColumn,line.length);this.$lines.splice(row,1,newLine);var delta={action:"removeText",range:range,text:removed};return this._emit("change",{data:delta}),range.start},this.removeLines=function(firstRow,lastRow){var range=new Range(firstRow,0,lastRow+1,0),removed=this.$lines.splice(firstRow,lastRow-firstRow+1),delta={action:"removeLines",range:range,nl:this.getNewLineCharacter(),lines:removed};return this._emit("change",{data:delta}),removed},this.removeNewLine=function(row){var firstLine=this.getLine(row),secondLine=this.getLine(row+1),range=new Range(row,firstLine.length,row+1,0),line=firstLine+secondLine;this.$lines.splice(row,2,line);var delta={action:"removeText",range:range,text:this.getNewLineCharacter()};this._emit("change",{data:delta})},this.replace=function(range,text){if(text.length==0&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);if(text)var end=this.insert(range.start,text);else end=range.start;return end},this.applyDeltas=function(deltas){for(var i=0;i<deltas.length;i++){var delta=deltas[i],range=Range.fromPoints(delta.range.start,delta.range.end);delta.action=="insertLines"?this.insertLines(range.start.row,delta.lines):delta.action=="insertText"?this.insert(range.start,delta.text):delta.action=="removeLines"?this.removeLines(range.start.row,range.end.row-1):delta.action=="removeText"&&this.remove(range)}},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--){var delta=deltas[i],range=Range.fromPoints(delta.range.start,delta.range.end);delta.action=="insertLines"?this.removeLines(range.start.row,range.end.row-1):delta.action=="insertText"?this.remove(range):delta.action=="removeLines"?this.insertLines(range.start.row,delta.lines):delta.action=="removeText"&&this.insert(range.start,delta.text)}}}).call(Document.prototype),exports.Document=Document}),define("ace/range",["require","exports","module"],function(require,exports,module){var Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row==range.start.row&&this.end.row==range.end.row&&this.start.column==range.start.column&&this.end.column==range.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(row,column){return this.compare(row,column)==0},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),cmp==1?(cmp=this.compare(start.row,start.column),cmp==1?2:cmp==0?1:0):cmp==-1?-2:(cmp=this.compare(start.row,start.column),cmp==-1?-1:cmp==1?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return this.comparePoint(range.start)==0&&this.comparePoint(range.end)==0},this.intersects=function(range){var cmp=this.compareRange(range);return cmp==-1||cmp==0||cmp==1},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){typeof row=="object"?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){typeof row=="object"?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return this.compare(row,column)==0?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return this.compare(row,column)==0?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return this.compare(row,column)==0?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return!this.isMultiLine()&&row===this.start.row?column<this.start.column?-1:column>this.end.column?1:0:row<this.start.row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?column<=this.end.column?0:1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};if(this.start.row<firstRow)var start={row:firstRow,column:0};if(this.end.row<firstRow)var end={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(cmp==0)return this;if(cmp==-1)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row==this.end.row&&this.start.column==this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},exports.Range=Range}),define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(require,exports,module){var oop=require("./lib/oop"),EventEmitter=require("./lib/event_emitter").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.document=doc,typeof column=="undefined"?this.setPosition(row.row,row.column):this.setPosition(row,column),this.$onChange=this.onChange.bind(this),doc.on("change",this.$onChange)};(function(){oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.onChange=function(e){var delta=e.data,range=delta.range;if(range.start.row==range.end.row&&range.start.row!=this.row)return;if(range.start.row>this.row)return;if(range.start.row==this.row&&range.start.column>this.column)return;var row=this.row,column=this.column;delta.action==="insertText"?range.start.row===row&&range.start.column<=column?range.start.row===range.end.row?column+=range.end.column-range.start.column:(column-=range.start.column,row+=range.end.row-range.start.row):range.start.row!==range.end.row&&range.start.row<row&&(row+=range.end.row-range.start.row):delta.action==="insertLines"?range.start.row<=row&&(row+=range.end.row-range.start.row):delta.action=="removeText"?range.start.row==row&&range.start.column<column?range.end.column>=column?column=range.start.column:column=Math.max(0,column-(range.end.column-range.start.column)):range.start.row!==range.end.row&&range.start.row<row?(range.end.row==row&&(column=Math.max(0,column-range.end.column)+range.start.column),row-=range.end.row-range.start.row):range.end.row==row&&(row-=range.end.row-range.start.row,column=Math.max(0,column-range.end.column)+range.start.column):delta.action=="removeLines"&&range.start.row<=row&&(range.end.row<=row?row-=range.end.row-range.start.row:(row=range.start.row,column=0)),this.setPosition(row,column,!0)},this.setPosition=function(row,column,noClip){var pos;noClip?pos={row:row,column:column}:pos=this.$clipPositionToDocument(row,column);if(this.row==pos.row&&this.column==pos.column)return;var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._emit("change",{old:old,value:pos})},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):row<0?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),column<0&&(pos.column=0),pos}}).call(Anchor.prototype)}),define("ace/lib/lang",["require","exports","module"],function(require,exports,module){exports.stringReverse=function(string){return string.split("").reverse().join("")},exports.stringRepeat=function(string,count){return(new Array(count+1)).join(string)};var trimBeginRegexp=/^\s\s*/,trimEndRegexp=/\s\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,"")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,"")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){var copy=[];for(var i=0,l=array.length;i<l;i++)array[i]&&typeof array[i]=="object"?copy[i]=this.copyObject(array[i]):copy[i]=array[i];return copy},exports.deepCopy=function(obj){if(typeof obj!="object")return obj;var copy=obj.constructor();for(var key in obj)typeof obj[key]=="object"?copy[key]=this.deepCopy(obj[key]):copy[key]=obj[key];return copy},exports.arrayToMap=function(arr){var map={};for(var i=0;i<arr.length;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;i<=array.length;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred}}),define("ace/worker/jshint",["require","exports","module"],function(require,exports,module){var JSHINT=function(){function F(){}function is_own(object,name){return Object.prototype.hasOwnProperty.call(object,name)}function checkOption(name,t){valOptions[name]===undefined&&boolOptions[name]===undefined&&warning("Bad option: '"+name+"'.",t)}function combine(t,o){var n;for(n in o)is_own(o,n)&&(t[n]=o[n])}function assume(){option.couch&&combine(predefined,couch),option.rhino&&combine(predefined,rhino),option.prototypejs&&combine(predefined,prototypejs),option.node&&(combine(predefined,node),option.globalstrict=!0),option.devel&&combine(predefined,devel),option.dojo&&combine(predefined,dojo),option.browser&&combine(predefined,browser),option.nonstandard&&combine(predefined,nonstandard),option.jquery&&combine(predefined,jquery),option.mootools&&combine(predefined,mootools),option.wsh&&combine(predefined,wsh),option.esnext&&useESNextSyntax(),option.globalstrict&&option.strict!==!1&&(option.strict=!0)}function quit(message,line,chr){var percentage=Math.floor(line/lines.length*100);throw{name:"JSHintError",line:line,character:chr,message:message+" ("+percentage+"% scanned).",raw:message}}function isundef(scope,m,t,a){return JSHINT.undefs.push([scope,m,t,a])}function warning(m,t,a,b,c,d){var ch,l,w;return t=t||nexttoken,t.id==="(end)"&&(t=token),l=t.line||0,ch=t.from||0,w={id:"(error)",raw:m,evidence:lines[l-1]||"",line:l,character:ch,a:a,b:b,c:c,d:d},w.reason=m.supplant(w),JSHINT.errors.push(w),option.passfail&&quit("Stopping. ",l,ch),warnings+=1,warnings>=option.maxerr&&quit("Too many errors.",l,ch),w}function warningAt(m,l,ch,a,b,c,d){return warning(m,{line:l,from:ch},a,b,c,d)}function error(m,t,a,b,c,d){var w=warning(m,t,a,b,c,d)}function errorAt(m,l,ch,a,b,c,d){return error(m,{line:l,from:ch},a,b,c,d)}function addlabel(t,type){t==="hasOwnProperty"&&warning("'hasOwnProperty' is a really bad name."),is_own(funct,t)&&!funct["(global)"]&&(funct[t]===!0?option.latedef&&warning("'{a}' was used before it was defined.",nexttoken,t):!option.shadow&&type!=="exception"&&warning("'{a}' is already defined.",nexttoken,t)),funct[t]=type,funct["(global)"]?(global[t]=funct,is_own(implied,t)&&(option.latedef&&warning("'{a}' was used before it was defined.",nexttoken,t),delete implied[t])):scope[t]=funct}function doOption(){var b,obj,filter,o=nexttoken.value,t,v;switch(o){case"*/":error("Unbegun comment.");break;case"/*members":case"/*member":o="/*members",membersOnly||(membersOnly={}),obj=membersOnly;break;case"/*jshint":case"/*jslint":obj=option,filter=boolOptions;break;case"/*global":obj=predefined;break;default:error("What?")}t=lex.token();e:for(;;){for(;;){if(t.type==="special"&&t.value==="*/")break e;if(t.id!=="(endline)"&&t.id!==",")break;t=lex.token()}t.type!=="(string)"&&t.type!=="(identifier)"&&o!=="/*members"&&error("Bad option.",t),v=lex.token(),v.id===":"?(v=lex.token(),obj===membersOnly&&error("Expected '{a}' and instead saw '{b}'.",t,"*/",":"),o==="/*jshint"&&checkOption(t.value,t),t.value!=="indent"||o!=="/*jshint"&&o!=="/*jslint"?t.value!=="maxerr"||o!=="/*jshint"&&o!=="/*jslint"?t.value!=="maxlen"||o!=="/*jshint"&&o!=="/*jslint"?t.value==="validthis"?funct["(global)"]?error("Option 'validthis' can't be used in a global scope."):v.value==="true"||v.value==="false"?obj[t.value]=v.value==="true":error("Bad option value.",v):v.value==="true"?obj[t.value]=!0:v.value==="false"?obj[t.value]=!1:error("Bad option value.",v):(b=+v.value,(typeof b!="number"||!isFinite(b)||b<=0||Math.floor(b)!==b)&&error("Expected a small integer and instead saw '{a}'.",v,v.value),obj.maxlen=b):(b=+v.value,(typeof b!="number"||!isFinite(b)||b<=0||Math.floor(b)!==b)&&error("Expected a small integer and instead saw '{a}'.",v,v.value),obj.maxerr=b):(b=+v.value,(typeof b!="number"||!isFinite(b)||b<=0||Math.floor(b)!==b)&&error("Expected a small integer and instead saw '{a}'.",v,v.value),obj.white=!0,obj.indent=b),t=lex.token()):((o==="/*jshint"||o==="/*jslint")&&error("Missing option value.",t),obj[t.value]=!1,t=v)}filter&&assume()}function peek(p){var i=p||0,j=0,t;while(j<=i)t=lookahead[j],t||(t=lookahead[j]=lex.token()),j+=1;return t}function advance(id,t){switch(token.id){case"(number)":nexttoken.id==="."&&warning("A dot following a number can be confused with a decimal point.",token);break;case"-":(nexttoken.id==="-"||nexttoken.id==="--")&&warning("Confusing minusses.");break;case"+":(nexttoken.id==="+"||nexttoken.id==="++")&&warning("Confusing plusses.")}if(token.type==="(string)"||token.identifier)anonname=token.value;id&&nexttoken.id!==id&&(t?nexttoken.id==="(end)"?warning("Unmatched '{a}'.",t,t.id):warning("Expected '{a}' to match '{b}' from line {c} and instead saw '{d}'.",nexttoken,id,t.id,t.line,nexttoken.value):(nexttoken.type!=="(identifier)"||nexttoken.value!==id)&&warning("Expected '{a}' and instead saw '{b}'.",nexttoken,id,nexttoken.value)),prevtoken=token,token=nexttoken;for(;;){nexttoken=lookahead.shift()||lex.token();if(nexttoken.id==="(end)"||nexttoken.id==="(error)")return;if(nexttoken.type==="special")doOption();else if(nexttoken.id!=="(endline)")break}}function expression(rbp,initial){var left,isArray=!1,isObject=!1;nexttoken.id==="(end)"&&error("Unexpected early end of program.",token),advance(),initial&&(anonname="anonymous",funct["(verb)"]=token.value);if(initial===!0&&token.fud)left=token.fud();else{if(token.nud)left=token.nud();else{if(nexttoken.type==="(number)"&&token.id===".")return warning("A leading decimal point can be confused with a dot: '.{a}'.",token,nexttoken.value),advance(),token;error("Expected an identifier and instead saw '{a}'.",token,token.id)}while(rbp<nexttoken.lbp)isArray=token.value==="Array",isObject=token.value==="Object",advance(),isArray&&token.id==="("&&nexttoken.id===")"&&warning("Use the array literal notation [].",token),isObject&&token.id==="("&&nexttoken.id===")"&&warning("Use the object literal notation {}.",token),token.led?left=token.led(left):error("Expected an operator and instead saw '{a}'.",token,token.id)}return left}function adjacent(left,right){left=left||token,right=right||nexttoken,option.white&&left.character!==right.from&&left.line===right.line&&(left.from+=left.character-left.from,warning("Unexpected space after '{a}'.",left,left.value))}function nobreak(left,right){left=left||token,right=right||nexttoken,option.white&&(left.character!==right.from||left.line!==right.line)&&warning("Unexpected space before '{a}'.",right,right.value)}function nospace(left,right){left=left||token,right=right||nexttoken,option.white&&!left.comment&&left.line===right.line&&adjacent(left,right)}function nonadjacent(left,right){option.white&&(left=left||token,right=right||nexttoken,left.line===right.line&&left.character===right.from&&(left.from+=left.character-left.from,warning("Missing space after '{a}'.",left,left.value)))}function nobreaknonadjacent(left,right){left=left||token,right=right||nexttoken,!option.laxbreak&&left.line!==right.line?warning("Bad line breaking before '{a}'.",right,right.id):option.white&&(left=left||token,right=right||nexttoken,left.character===right.from&&(left.from+=left.character-left.from,warning("Missing space after '{a}'.",left,left.value)))}function indentation(bias){var i;option.white&&nexttoken.id!=="(end)"&&(i=indent+(bias||0),nexttoken.from!==i&&warning("Expected '{a}' to have an indentation at {b} instead at {c}.",nexttoken,nexttoken.value,i,nexttoken.from))}function nolinebreak(t){t=t||token,t.line!==nexttoken.line&&warning("Line breaking error '{a}'.",t,t.value)}function comma(){token.line!==nexttoken.line?option.laxcomma||(comma.first&&(warning("Comma warnings can be turned off with 'laxcomma'"),comma.first=!1),warning("Bad line breaking before '{a}'.",token,nexttoken.id)):!token.comment&&token.character!==nexttoken.from&&option.white&&(token.from+=token.character-token.from,warning("Unexpected space after '{a}'.",token,token.value)),advance(","),nonadjacent(token,nexttoken)}function symbol(s,p){var x=syntax[s];if(!x||typeof x!="object")syntax[s]=x={id:s,lbp:p,value:s};return x}function delim(s){return symbol(s,0)}function stmt(s,f){var x=delim(s);return x.identifier=x.reserved=!0,x.fud=f,x}function blockstmt(s,f){var x=stmt(s,f);return x.block=!0,x}function reserveName(x){var c=x.id.charAt(0);if(c>="a"&&c<="z"||c>="A"&&c<="Z")x.identifier=x.reserved=!0;return x}function prefix(s,f){var x=symbol(s,150);return reserveName(x),x.nud=typeof f=="function"?f:function(){this.right=expression(150),this.arity="unary";if(this.id==="++"||this.id==="--")option.plusplus?warning("Unexpected use of '{a}'.",this,this.id):(!this.right.identifier||this.right.reserved)&&this.right.id!=="."&&this.right.id!=="["&&warning("Bad operand.",this);return this},x}function type(s,f){var x=delim(s);return x.type=s,x.nud=f,x}function reserve(s,f){var x=type(s,f);return x.identifier=x.reserved=!0,x}function reservevar(s,v){return reserve(s,function(){return typeof v=="function"&&v(this),this})}function infix(s,f,p,w){var x=symbol(s,p);return reserveName(x),x.led=function(left){return w||(nobreaknonadjacent(prevtoken,token),nonadjacent(token,nexttoken)),s==="in"&&left.id==="!"&&warning("Confusing use of '{a}'.",left,"!"),typeof f=="function"?f(left,this):(this.left=left,this.right=expression(p),this)},x}function relation(s,f){var x=symbol(s,100);return x.led=function(left){nobreaknonadjacent(prevtoken,token),nonadjacent(token,nexttoken);var right=expression(100);return left&&left.id==="NaN"||right&&right.id==="NaN"?warning("Use the isNaN function to compare with NaN.",this):f&&f.apply(this,[left,right]),left.id==="!"&&warning("Confusing use of '{a}'.",left,"!"),right.id==="!"&&warning("Confusing use of '{a}'.",right,"!"),this.left=left,this.right=right,this},x}function isPoorRelation(node){return node&&(node.type==="(number)"&&+node.value===0||node.type==="(string)"&&node.value===""||node.type==="null"&&!option.eqnull||node.type==="true"||node.type==="false"||node.type==="undefined")}function assignop(s,f){return symbol(s,20).exps=!0,infix(s,function(left,that){var l;that.left=left,predefined[left.value]===!1&&scope[left.value]["(global)"]===!0?warning("Read only.",left):left["function"]&&warning("'{a}' is a function.",left,left.value);if(left){option.esnext&&funct[left.value]==="const"&&warning("Attempting to override '{a}' which is a constant",left,left.value);if(left.id==="."||left.id==="[")return(!left.left||left.left.value==="arguments")&&warning("Bad assignment.",that),that.right=expression(19),that;if(left.identifier&&!left.reserved)return funct[left.value]==="exception"&&warning("Do not assign to the exception parameter.",left),that.right=expression(19),that;left===syntax["function"]&&warning("Expected an identifier in an assignment and instead saw a function invocation.",token)}error("Bad assignment.",that)},20)}function bitwise(s,f,p){var x=symbol(s,p);return reserveName(x),x.led=typeof f=="function"?f:function(left){return option.bitwise&&warning("Unexpected use of '{a}'.",this,this.id),this.left=left,this.right=expression(p),this},x}function bitwiseassignop(s){return symbol(s,20).exps=!0,infix(s,function(left,that){option.bitwise&&warning("Unexpected use of '{a}'.",that,that.id),nonadjacent(prevtoken,token),nonadjacent(token,nexttoken);if(left)return left.id==="."||left.id==="["||left.identifier&&!left.reserved?(expression(19),that):(left===syntax["function"]&&warning("Expected an identifier in an assignment, and instead saw a function invocation.",token),that);error("Bad assignment.",that)},20)}function suffix(s,f){var x=symbol(s,150);return x.led=function(left){return option.plusplus?warning("Unexpected use of '{a}'.",this,this.id):(!left.identifier||left.reserved)&&left.id!=="."&&left.id!=="["&&warning("Bad operand.",this),this.left=left,this},x}function optionalidentifier(fnparam){if(nexttoken.identifier)return advance(),token.reserved&&!option.es5&&(!fnparam||token.value!=="undefined")&&warning("Expected an identifier and instead saw '{a}' (a reserved word).",token,token.id),token.value}function identifier(fnparam){var i=optionalidentifier(fnparam);if(i)return i;token.id==="function"&&nexttoken.id==="("?warning("Missing name in function declaration."):error("Expected an identifier and instead saw '{a}'.",nexttoken,nexttoken.value)}function reachable(s){var i=0,t;if(nexttoken.id!==";"||noreach)return;for(;;){t=peek(i);if(t.reach)return;if(t.id!=="(endline)"){if(t.id==="function"){if(!option.latedef)break;warning("Inner functions should be listed at the top of the outer function.",t);break}warning("Unreachable '{a}' after '{b}'.",t,t.value,s);break}i+=1}}function statement(noindent){var i=indent,r,s=scope,t=nexttoken;if(t.id===";"){advance(";");return}t.identifier&&!t.reserved&&peek().id===":"&&(advance(),advance(":"),scope=Object.create(s),addlabel(t.value,"label"),nexttoken.labelled||warning("Label '{a}' on {b} statement.",nexttoken,t.value,nexttoken.value),jx.test(t.value+":")&&warning("Label '{a}' looks like a javascript url.",t,t.value),nexttoken.label=t.value,t=nexttoken),noindent||indentation(),r=expression(0,!0);if(!t.block){!option.expr&&(!r||!r.exps)?warning("Expected an assignment or function call and instead saw an expression.",token):option.nonew&&r.id==="("&&r.left.id==="new"&&warning("Do not use 'new' for side effects.");if(nexttoken.id===",")return comma();nexttoken.id!==";"?option.asi||(!option.lastsemic||nexttoken.id!=="}"||nexttoken.line!==token.line)&&warningAt("Missing semicolon.",token.line,token.character):(adjacent(token,nexttoken),advance(";"),nonadjacent(token,nexttoken))}return indent=i,scope=s,r}function statements(startLine){var a=[],f,p;while(!nexttoken.reach&&nexttoken.id!=="(end)")nexttoken.id===";"?(p=peek(),(!p||p.id!=="(")&&warning("Unnecessary semicolon."),advance(";")):a.push(statement(startLine===nexttoken.line));return a}function directives(){var i,p,pn;for(;;){if(nexttoken.id==="(string)"){p=peek(0);if(p.id==="(endline)"){i=1;do pn=peek(i),i+=1;while(pn.id==="(endline)");if(pn.id!==";"){if(pn.id!=="(string)"&&pn.id!=="(number)"&&pn.id!=="(regexp)"&&pn.identifier!==!0&&pn.id!=="}")break;warning("Missing semicolon.",nexttoken)}else p=pn}else if(p.id==="}")warning("Missing semicolon.",p);else if(p.id!==";")break;indentation(),advance(),directive[token.value]&&warning('Unnecessary directive "{a}".',token,token.value),token.value==="use strict"&&(option.newcap=!0,option.undef=!0),directive[token.value]=!0,p.id===";"&&advance(";");continue}break}}function block(ordinary,stmt,isfunc){var a,b=inblock,old_indent=indent,m,s=scope,t,line,d;inblock=ordinary;if(!ordinary||!option.funcscope)scope=Object.create(scope);nonadjacent(token,nexttoken),t=nexttoken;if(nexttoken.id==="{"){advance("{"),line=token.line;if(nexttoken.id!=="}"){indent+=option.indent;while(!ordinary&&nexttoken.from>indent)indent+=option.indent;if(isfunc){m={};for(d in directive)is_own(directive,d)&&(m[d]=directive[d]);directives(),option.strict&&funct["(context)"]["(global)"]&&!m["use strict"]&&!directive["use strict"]&&warning('Missing "use strict" statement.')}a=statements(line),isfunc&&(directive=m),indent-=option.indent,line!==nexttoken.line&&indentation()}else line!==nexttoken.line&&indentation();advance("}",t),indent=old_indent}else ordinary?((!stmt||option.curly)&&warning("Expected '{a}' and instead saw '{b}'.",nexttoken,"{",nexttoken.value),noreach=!0,indent+=option.indent,a=[statement(nexttoken.line===token.line)],indent-=option.indent,noreach=!1):error("Expected '{a}' and instead saw '{b}'.",nexttoken,"{",nexttoken.value);funct["(verb)"]=null;if(!ordinary||!option.funcscope)scope=s;return inblock=b,ordinary&&option.noempty&&(!a||a.length===0)&&warning("Empty block."),a}function countMember(m){membersOnly&&typeof membersOnly[m]!="boolean"&&warning("Unexpected /*member '{a}'.",token,m),typeof member[m]=="number"?member[m]+=1:member[m]=1}function note_implied(token){var name=token.value,line=token.line,a=implied[name];typeof a=="function"&&(a=!1),a?a[a.length-1]!==line&&a.push(line):(a=[line],implied[name]=a)}function property_name(){var id=optionalidentifier(!0);return id||(nexttoken.id==="(string)"?(id=nexttoken.value,advance()):nexttoken.id==="(number)"&&(id=nexttoken.value.toString(),advance())),id}function functionparams(){var i,t=nexttoken,p=[];advance("("),nospace();if(nexttoken.id===")"){advance(")");return}for(;;){i=identifier(!0),p.push(i),addlabel(i,"parameter");if(nexttoken.id!==",")return advance(")",t),nospace(prevtoken,token),p;comma()}}function doFunction(i,statement){var f,oldOption=option,oldScope=scope;return option=Object.create(option),scope=Object.create(scope),funct={"(name)":i||'"'+anonname+'"',"(line)":nexttoken.line,"(context)":funct,"(breakage)":0,"(loopage)":0,"(scope)":scope,"(statement)":statement},f=funct,token.funct=funct,functions.push(funct),i&&addlabel(i,"function"),funct["(params)"]=functionparams(),block(!1,!1,!0),scope=oldScope,option=oldOption,funct["(last)"]=token.line,funct=funct["(context)"],f}function jsonValue(){function jsonObject(){var o={},t=nexttoken;advance("{");if(nexttoken.id!=="}")for(;;){if(nexttoken.id==="(end)")error("Missing '}' to match '{' from line {a}.",nexttoken,t.line);else{if(nexttoken.id==="}"){warning("Unexpected comma.",token);break}nexttoken.id===","?error("Unexpected comma.",nexttoken):nexttoken.id!=="(string)"&&warning("Expected a string and instead saw {a}.",nexttoken,nexttoken.value)}o[nexttoken.value]===!0?warning("Duplicate key '{a}'.",nexttoken,nexttoken.value):nexttoken.value==="__proto__"&&!option.proto||nexttoken.value==="__iterator__"&&!option.iterator?warning("The '{a}' key may produce unexpected results.",nexttoken,nexttoken.value):o[nexttoken.value]=!0,advance(),advance(":"),jsonValue();if(nexttoken.id!==",")break;advance(",")}advance("}")}function jsonArray(){var t=nexttoken;advance("[");if(nexttoken.id!=="]")for(;;){if(nexttoken.id==="(end)")error("Missing ']' to match '[' from line {a}.",nexttoken,t.line);else{if(nexttoken.id==="]"){warning("Unexpected comma.",token);break}nexttoken.id===","&&error("Unexpected comma.",nexttoken)}jsonValue();if(nexttoken.id!==",")break;advance(",")}advance("]")}switch(nexttoken.id){case"{":jsonObject();break;case"[":jsonArray();break;case"true":case"false":case"null":case"(number)":case"(string)":advance();break;case"-":advance("-"),token.character!==nexttoken.from&&warning("Unexpected space after '-'.",token),adjacent(token,nexttoken),advance("(number)");break;default:error("Expected a JSON value.",nexttoken)}}var anonname,bang={"<":!0,"<=":!0,"==":!0,"===":!0,"!==":!0,"!=":!0,">":!0,">=":!0,"+":!0,"-":!0,"*":!0,"/":!0,"%":!0},boolOptions={asi:!0,bitwise:!0,boss:!0,browser:!0,couch:!0,curly:!0,debug:!0,devel:!0,dojo:!0,eqeqeq:!0,eqnull:!0,es5:!0,esnext:!0,evil:!0,expr:!0,forin:!0,funcscope:!0,globalstrict:!0,immed:!0,iterator:!0,jquery:!0,lastsemic:!0,latedef:!0,laxbreak:!0,laxcomma:!0,loopfunc:!0,mootools:!0,multistr:!0,newcap:!0,noarg:!0,node:!0,noempty:!0,nonew:!0,nonstandard:!0,nomen:!0,onevar:!0,onecase:!0,passfail:!0,plusplus:!0,proto:!0,prototypejs:!0,regexdash:!0,regexp:!0,rhino:!0,undef:!0,scripturl:!0,shadow:!0,smarttabs:!0,strict:!0,sub:!0,supernew:!0,trailing:!0,validthis:!0,withstmt:!0,white:!0,wsh:!0},valOptions={maxlen:!1,indent:!1,maxerr:!1,predef:!1},browser={ArrayBuffer:!1,ArrayBufferView:!1,Audio:!1,addEventListener:!1,applicationCache:!1,atob:!1,blur:!1,btoa:!1,clearInterval:!1,clearTimeout:!1,close:!1,closed:!1,DataView:!1,DOMParser:!1,defaultStatus:!1,document:!1,event:!1,FileReader:!1,Float32Array:!1,Float64Array:!1,FormData:!1,focus:!1,frames:!1,getComputedStyle:!1,HTMLElement:!1,HTMLAnchorElement:!1,HTMLBaseElement:!1,HTMLBlockquoteElement:!1,HTMLBodyElement:!1,HTMLBRElement:!1,HTMLButtonElement:!1,HTMLCanvasElement:!1,HTMLDirectoryElement:!1,HTMLDivElement:!1,HTMLDListElement:!1,HTMLFieldSetElement:!1,HTMLFontElement:!1,HTMLFormElement:!1,HTMLFrameElement:!1,HTMLFrameSetElement:!1,HTMLHeadElement:!1,HTMLHeadingElement:!1,HTMLHRElement:!1,HTMLHtmlElement:!1,HTMLIFrameElement:!1,HTMLImageElement:!1,HTMLInputElement:!1,HTMLIsIndexElement:!1,HTMLLabelElement:!1,HTMLLayerElement:!1,HTMLLegendElement:!1,HTMLLIElement:!1,HTMLLinkElement:!1,HTMLMapElement:!1,HTMLMenuElement:!1,HTMLMetaElement:!1,HTMLModElement:!1,HTMLObjectElement:!1,HTMLOListElement:!1,HTMLOptGroupElement:!1,HTMLOptionElement:!1,HTMLParagraphElement:!1,HTMLParamElement:!1,HTMLPreElement:!1,HTMLQuoteElement:!1,HTMLScriptElement:!1,HTMLSelectElement:!1,HTMLStyleElement:!1,HTMLTableCaptionElement:!1,HTMLTableCellElement:!1,HTMLTableColElement:!1,HTMLTableElement:!1,HTMLTableRowElement:!1,HTMLTableSectionElement:!1,HTMLTextAreaElement:!1,HTMLTitleElement:!1,HTMLUListElement:!1,HTMLVideoElement:!1,history:!1,Int16Array:!1,Int32Array:!1,Int8Array:!1,Image:!1,length:!1,localStorage:!1,location:!1,MessageChannel:!1,MessageEvent:!1,MessagePort:!1,moveBy:!1,moveTo:!1,name:!1,navigator:!1,onbeforeunload:!0,onblur:!0,onerror:!0,onfocus:!0,onload:!0,onresize:!0,onunload:!0,open:!1,openDatabase:!1,opener:!1,Option:!1,parent:!1,print:!1,removeEventListener:!1,resizeBy:!1,resizeTo:!1,screen:!1,scroll:!1,scrollBy:!1,scrollTo:!1,sessionStorage:!1,setInterval:!1,setTimeout:!1,SharedWorker:!1,status:!1,top:!1,Uint16Array:!1,Uint32Array:!1,Uint8Array:!1,WebSocket:!1,window:!1,Worker:!1,XMLHttpRequest:!1,XMLSerializer:!1,XPathEvaluator:!1,XPathException:!1,XPathExpression:!1,XPathNamespace:!1,XPathNSResolver:!1,XPathResult:!1},couch={require:!1,respond:!1,getRow:!1,emit:!1,send:!1,start:!1,sum:!1,log:!1,exports:!1,module:!1,provides:!1},devel={alert:!1,confirm:!1,console:!1,Debug:!1,opera:!1,prompt:!1},dojo={dojo:!1,dijit:!1,dojox:!1,define:!1,require:!1},escapes={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"/":"\\/","\\":"\\\\"},funct,functionicity=["closure","exception","global","label","outer","unused","var"],functions,global,implied,inblock,indent,jsonmode,jquery={$:!1,jQuery:!1},lines,lookahead,member,membersOnly,mootools={$:!1,$$:!1,Assets:!1,Browser:!1,Chain:!1,Class:!1,Color:!1,Cookie:!1,Core:!1,Document:!1,DomReady:!1,DOMReady:!1,Drag:!1,Element:!1,Elements:!1,Event:!1,Events:!1,Fx:!1,Group:!1,Hash:!1,HtmlTable:!1,Iframe:!1,IframeShim:!1,InputValidator:!1,instanceOf:!1,Keyboard:!1,Locale:!1,Mask:!1,MooTools:!1,Native:!1,Options:!1,OverText:!1,Request:!1,Scroller:!1,Slick:!1,Slider:!1,Sortables:!1,Spinner:!1,Swiff:!1,Tips:!1,Type:!1,typeOf:!1,URI:!1,Window:!1},nexttoken,node={__filename:!1,__dirname:!1,Buffer:!1,console:!1,exports:!1,GLOBAL:!1,global:!1,module:!1,process:!1,require:!1,setTimeout:!1,clearTimeout:!1,setInterval:!1,clearInterval:!1},noreach,option,predefined,prereg,prevtoken,prototypejs={$:!1,$$:!1,$A:!1,$F:!1,$H:!1,$R:!1,$break:!1,$continue:!1,$w:!1,Abstract:!1,Ajax:!1,Class:!1,Enumerable:!1,Element:!1,Event:!1,Field:!1,Form:!1,Hash:!1,Insertion:!1,ObjectRange:!1,PeriodicalExecuter:!1,Position:!1,Prototype:!1,Selector:!1,Template:!1,Toggle:!1,Try:!1,Autocompleter:!1,Builder:!1,Control:!1,Draggable:!1,Draggables:!1,Droppables:!1,Effect:!1,Sortable:!1,SortableObserver:!1,Sound:!1,Scriptaculous:!1},rhino={defineClass:!1,deserialize:!1,gc:!1,help:!1,importPackage:!1,java:!1,load:!1,loadClass:!1,print:!1,quit:!1,readFile:!1,readUrl:!1,runCommand:!1,seal:!1,serialize:!1,spawn:!1,sync:!1,toint32:!1,version:!1},scope,stack,standard={Array:!1,Boolean:!1,Date:!1,decodeURI:!1,decodeURIComponent:!1,encodeURI:!1,encodeURIComponent:!1,Error:!1,eval:!1,EvalError:!1,Function:!1,hasOwnProperty:!1,isFinite:!1,isNaN:!1,JSON:!1,Math:!1,Number:!1,Object:!1,parseInt:!1,parseFloat:!1,RangeError:!1,ReferenceError:!1,RegExp:!1,String:!1,SyntaxError:!1,TypeError:!1,URIError:!1},nonstandard={escape:!1,unescape:!1},standard_member={E:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,MAX_VALUE:!0,MIN_VALUE:!0,NEGATIVE_INFINITY:!0,PI:!0,POSITIVE_INFINITY:!0,SQRT1_2:!0,SQRT2:!0},directive,syntax={},tab,token,urls,useESNextSyntax,warnings,wsh={ActiveXObject:!0,Enumerator:!0,GetObject:!0,ScriptEngine:!0,ScriptEngineBuildVersion:!0,ScriptEngineMajorVersion:!0,ScriptEngineMinorVersion:!0,VBArray:!0,WSH:!0,WScript:!0,XDomainRequest:!0},ax,cx,tx,nx,nxg,lx,ix,jx,ft;(function(){ax=/@cc|<\/?|script|\]\s*\]|<\s*!|&lt/i,cx=/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,tx=/^\s*([(){}\[.,:;'"~\?\]#@]|==?=?|\/(\*(jshint|jslint|members?|global)?|=|\/)?|\*[\/=]?|\+(?:=|\++)?|-(?:=|-+)?|%=?|&[&=]?|\|[|=]?|>>?>?=?|<([\/=!]|\!(\[|--)?|<=?)?|\^=?|\!=?=?|[a-zA-Z_$][a-zA-Z0-9_$]*|[0-9]+([xX][0-9a-fA-F]+|\.[0-9]*)?([eE][+\-]?[0-9]+)?)/,nx=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,nxg=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,lx=/\*\/|\/\*/,ix=/^([a-zA-Z_$][a-zA-Z0-9_$]*)$/,jx=/^(?:javascript|jscript|ecmascript|vbscript|mocha|livescript)\s*:/i,ft=/^\s*\/\*\s*falls\sthrough\s*\*\/\s*$/})(),typeof Array.isArray!="function"&&(Array.isArray=function(o){return Object.prototype.toString.apply(o)==="[object Array]"}),typeof Object.create!="function"&&(Object.create=function(o){return F.prototype=o,new F}),typeof Object.keys!="function"&&(Object.keys=function(o){var a=[],k;for(k in o)is_own(o,k)&&a.push(k);return a}),typeof String.prototype.entityify!="function"&&(String.prototype.entityify=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),typeof String.prototype.isAlpha!="function"&&(String.prototype.isAlpha=function(){return this>="a"&&this<="z￿"||this>="A"&&this<="Z￿"}),typeof String.prototype.isDigit!="function"&&(String.prototype.isDigit=function(){return this>="0"&&this<="9"}),typeof String.prototype.supplant!="function"&&(String.prototype.supplant=function(o){return this.replace(/\{([^{}]*)\}/g,function(a,b){var r=o[b];return typeof r=="string"||typeof r=="number"?r:a})}),typeof String.prototype.name!="function"&&(String.prototype.name=function(){return ix.test(this)?this:nx.test(this)?'"'+this.replace(nxg,function(a){var c=escapes[a];return c?c:"\\u"+("0000"+a.charCodeAt().toString(16)).slice(-4)})+'"':'"'+this+'"'});var lex=function(){function nextLine(){var at,tw;return line>=lines.length?!1:(character=1,s=lines[line],line+=1,option.smarttabs?at=s.search(/ \t/):at=s.search(/ \t|\t /),at>=0&&warningAt("Mixed spaces and tabs.",line,at+1),s=s.replace(/\t/g,tab),at=s.search(cx),at>=0&&warningAt("Unsafe character.",line,at),option.maxlen&&option.maxlen<s.length&&warningAt("Line too long.",line,s.length),tw=option.trailing&&s.match(/^(.*?)\s+$/),tw&&!/^\s+$/.test(s)&&warningAt("Trailing whitespace.",line,tw[1].length+1),!0)}function it(type,value){var i,t;return type==="(color)"||type==="(range)"?t={type:type}:type==="(punctuator)"||type==="(identifier)"&&is_own(syntax,value)?t=syntax[value]||syntax["(error)"]:t=syntax[type],t=Object.create(t),(type==="(string)"||type==="(range)")&&!option.scripturl&&jx.test(value)&&warningAt("Script URL.",line,from),type==="(identifier)"&&(t.identifier=!0,value==="__proto__"&&!option.proto?warningAt("The '{a}' property is deprecated.",line,from,value):value==="__iterator__"&&!option.iterator?warningAt("'{a}' is only available in JavaScript 1.7.",line,from,value):option.nomen&&(value.charAt(0)==="_"||value.charAt(value.length-1)==="_")&&(!option.node||token.id==="."||value!=="__dirname"&&value!=="__filename")&&warningAt("Unexpected {a} in '{b}'.",line,from,"dangling '_'",value)),t.value=value,t.line=line,t.character=character,t.from=from,i=t.id,i!=="(endline)"&&(prereg=i&&("(,=:[!&|?{};".indexOf(i.charAt(i.length-1))>=0||i==="return"||i==="case")),t}var character,from,line,s;return{init:function(source){typeof source=="string"?lines=source.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n"):lines=source,lines[0]&&lines[0].substr(0,2)==="#!"&&(lines[0]=""),line=0,nextLine(),from=1},range:function(begin,end){var c,value="";from=character,s.charAt(0)!==begin&&errorAt("Expected '{a}' and instead saw '{b}'.",line,character,begin,s.charAt(0));for(;;){s=s.slice(1),character+=1,c=s.charAt(0);switch(c){case"":errorAt("Missing '{a}'.",line,character,c);break;case end:return s=s.slice(1),character+=1,it("(range)",value);case"\\":warningAt("Unexpected '{a}'.",line,character,c)}value+=c}},token:function(){function match(x){var r=x.exec(s),r1;if(r)return l=r[0].length,r1=r[1],c=r1.charAt(0),s=s.substr(l),from=character+l-r1.length,character+=l,r1}function string(x){function esc(n){var i=parseInt(s.substr(j+1,n),16);j+=n,i>=32&&i<=126&&i!==34&&i!==92&&i!==39&&warningAt("Unnecessary escapement.",line,character),character+=n,c=String.fromCharCode(i)}var c,j,r="",allowNewLine=!1;jsonmode&&x!=='"'&&warningAt("Strings must use doublequote.",line,character),j=0;e:for(;;){while(j>=s.length){j=0;var cl=line,cf=from;if(!nextLine()){errorAt("Unclosed string.",cl,cf);break e}allowNewLine?allowNewLine=!1:warningAt("Unclosed string.",cl,cf)}c=s.charAt(j);if(c===x)return character+=1,s=s.substr(j+1),it("(string)",r,x);if(c<" "){if(c==="\n"||c==="\r")break;warningAt("Control character in string: {a}.",line,character+j,s.slice(0,j))}else if(c==="\\"){j+=1,character+=1,c=s.charAt(j),n=s.charAt(j+1);switch(c){case"\\":case'"':case"/":break;case"'":jsonmode&&warningAt("Avoid \\'.",line,character);break;case"b":c="\b";break;case"f":c="\f";break;case"n":c="\n";break;case"r":c="\r";break;case"t":c="	";break;case"0":c="\0",n>=0&&n<=7&&directive["use strict"]&&warningAt("Octal literals are not allowed in strict mode.",line,character);break;case"u":esc(4);break;case"v":jsonmode&&warningAt("Avoid \\v.",line,character),c="";break;case"x":jsonmode&&warningAt("Avoid \\x-.",line,character),esc(2);break;case"":allowNewLine=!0;if(option.multistr){jsonmode&&warningAt("Avoid EOL escapement.",line,character),c="",character-=1;break}warningAt("Bad escapement of EOL. Use option multistr if needed.",line,character);break;default:warningAt("Bad escapement.",line,character)}}r+=c,character+=1,j+=1}}var b,c,captures,d,depth,high,i,l,low,q,t,isLiteral,isInRange,n;for(;;){if(!s)return it(nextLine()?"(endline)":"(end)","");t=match(tx);if(!t){t="",c="";while(s&&s<"!")s=s.substr(1);s&&(errorAt("Unexpected '{a}'.",line,character,s.substr(0,1)),s="")}else{if(c.isAlpha()||c==="_"||c==="$")return it("(identifier)",t);if(c.isDigit())return isFinite(Number(t))||warningAt("Bad number '{a}'.",line,character,t),s.substr(0,1).isAlpha()&&warningAt("Missing space after '{a}'.",line,character,t),c==="0"&&(d=t.substr(1,1),d.isDigit()?token.id!=="."&&warningAt("Don't use extra leading zeros '{a}'.",line,character,t):jsonmode&&(d==="x"||d==="X")&&warningAt("Avoid 0x-. '{a}'.",line,character,t)),t.substr(t.length-1)==="."&&warningAt("A trailing decimal point can be confused with a dot '{a}'.",line,character,t),it("(number)",t);switch(t){case'"':case"'":return string(t);case"//":s="",token.comment=!0;break;case"/*":for(;;){i=s.search(lx);if(i>=0)break;nextLine()||errorAt("Unclosed comment.",line,character)}character+=i+2,s.substr(i,1)==="/"&&errorAt("Nested comment.",line,character),s=s.substr(i+2),token.comment=!0;break;case"/*members":case"/*member":case"/*jshint":case"/*jslint":case"/*global":case"*/":return{value:t,type:"special",line:line,character:character,from:from};case"":break;case"/":token.id==="/="&&errorAt("A regular expression literal can be confused with '/='.",line,from);if(prereg){depth=0,captures=0,l=0;for(;;){b=!0,c=s.charAt(l),l+=1;switch(c){case"":return errorAt("Unclosed regular expression.",line,from),quit("Stopping.",line,from);case"/":depth>0&&warningAt("{a} unterminated regular expression group(s).",line,from+l,depth),c=s.substr(0,l-1),q={g:!0,i:!0,m:!0};while(q[s.charAt(l)]===!0)q[s.charAt(l)]=!1,l+=1;return character+=l,s=s.substr(l),q=s.charAt(0),(q==="/"||q==="*")&&errorAt("Confusing regular expression.",line,from),it("(regexp)",c);case"\\":c=s.charAt(l),c<" "?warningAt("Unexpected control character in regular expression.",line,from+l):c==="<"&&warningAt("Unexpected escaped character '{a}' in regular expression.",line,from+l,c),l+=1;break;case"(":depth+=1,b=!1;if(s.charAt(l)==="?"){l+=1;switch(s.charAt(l)){case":":case"=":case"!":l+=1;break;default:warningAt("Expected '{a}' and instead saw '{b}'.",line,from+l,":",s.charAt(l))}}else captures+=1;break;case"|":b=!1;break;case")":depth===0?warningAt("Unescaped '{a}'.",line,from+l,")"):depth-=1;break;case" ":q=1;while(s.charAt(l)===" ")l+=1,q+=1;q>1&&warningAt("Spaces are hard to count. Use {{a}}.",line,from+l,q);break;case"[":c=s.charAt(l),c==="^"&&(l+=1,option.regexp?warningAt("Insecure '{a}'.",line,from+l,c):s.charAt(l)==="]"&&errorAt("Unescaped '{a}'.",line,from+l,"^")),c==="]"&&warningAt("Empty class.",line,from+l-1),isLiteral=!1,isInRange=!1;e:do{c=s.charAt(l),l+=1;switch(c){case"[":case"^":warningAt("Unescaped '{a}'.",line,from+l,c),isInRange?isInRange=!1:isLiteral=!0;break;case"-":isLiteral&&!isInRange?(isLiteral=!1,isInRange=!0):isInRange?isInRange=!1:s.charAt(l)==="]"?isInRange=!0:(option.regexdash!==(l===2||l===3&&s.charAt(1)==="^")&&warningAt("Unescaped '{a}'.",line,from+l-1,"-"),isLiteral=!0);break;case"]":isInRange&&!option.regexdash&&warningAt("Unescaped '{a}'.",line,from+l-1,"-");break e;case"\\":c=s.charAt(l),c<" "?warningAt("Unexpected control character in regular expression.",line,from+l):c==="<"&&warningAt("Unexpected escaped character '{a}' in regular expression.",line,from+l,c),l+=1,/[wsd]/i.test(c)?(isInRange&&(warningAt("Unescaped '{a}'.",line,from+l,"-"),isInRange=!1),isLiteral=!1):isInRange?isInRange=!1:isLiteral=!0;break;case"/":warningAt("Unescaped '{a}'.",line,from+l-1,"/"),isInRange?isInRange=!1:isLiteral=!0;break;case"<":isInRange?isInRange=!1:isLiteral=!0;break;default:isInRange?isInRange=!1:isLiteral=!0}}while(c);break;case".":option.regexp&&warningAt("Insecure '{a}'.",line,from+l,c);break;case"]":case"?":case"{":case"}":case"+":case"*":warningAt("Unescaped '{a}'.",line,from+l,c)}if(b)switch(s.charAt(l)){case"?":case"+":case"*":l+=1,s.charAt(l)==="?"&&(l+=1);break;case"{":l+=1,c=s.charAt(l),(c<"0"||c>"9")&&warningAt("Expected a number and instead saw '{a}'.",line,from+l,c),l+=1,low=+c;for(;;){c=s.charAt(l);if(c<"0"||c>"9")break;l+=1,low=+c+low*10}high=low;if(c===","){l+=1,high=Infinity,c=s.charAt(l);if(c>="0"&&c<="9"){l+=1,high=+c;for(;;){c=s.charAt(l);if(c<"0"||c>"9")break;l+=1,high=+c+high*10}}}s.charAt(l)!=="}"?warningAt("Expected '{a}' and instead saw '{b}'.",line,from+l,"}",c):l+=1,s.charAt(l)==="?"&&(l+=1),low>high&&warningAt("'{a}' should not be greater than '{b}'.",line,from+l,low,high)}}return c=s.substr(0,l-1),character+=l,s=s.substr(l),it("(regexp)",c)}return it("(punctuator)",t);case"#":return it("(punctuator)",t);default:return it("(punctuator)",t)}}}}}}();type("(number)",function(){return this}),type("(string)",function(){return this}),syntax["(identifier)"]={type:"(identifier)",lbp:0,identifier:!0,nud:function(){var v=this.value,s=scope[v],f;typeof s=="function"?s=undefined:typeof s=="boolean"&&(f=funct,funct=functions[0],addlabel(v,"var"),s=funct,funct=f);if(funct===s)switch(funct[v]){case"unused":funct[v]="var";break;case"unction":funct[v]="function",this["function"]=!0;break;case"function":this["function"]=!0;break;case"label":warning("'{a}' is a statement label.",token,v)}else if(funct["(global)"])option.undef&&typeof predefined[v]!="boolean"&&(anonname!=="typeof"&&anonname!=="delete"||nexttoken&&(nexttoken.value==="."||nexttoken.value==="["))&&isundef(funct,"'{a}' is not defined.",token,v),note_implied(token);else switch(funct[v]){case"closure":case"function":case"var":case"unused":warning("'{a}' used out of scope.",token,v);break;case"label":warning("'{a}' is a statement label.",token,v);break;case"outer":case"global":break;default:if(s===!0)funct[v]=!0;else if(s===null)warning("'{a}' is not allowed.",token,v),note_implied(token);else if(typeof s!="object")option.undef&&(anonname!=="typeof"&&anonname!=="delete"||nexttoken&&(nexttoken.value==="."||nexttoken.value==="["))&&isundef(funct,"'{a}' is not defined.",token,v),funct[v]=!0,note_implied(token);else switch(s[v]){case"function":case"unction":this["function"]=!0,s[v]="closure",funct[v]=s["(global)"]?"global":"outer";break;case"var":case"unused":s[v]="closure",funct[v]=s["(global)"]?"global":"outer";break;case"closure":case"parameter":funct[v]=s["(global)"]?"global":"outer";break;case"label":warning("'{a}' is a statement label.",token,v)}}return this},led:function(){error("Expected an operator and instead saw '{a}'.",nexttoken,nexttoken.value)}},type("(regexp)",function(){return this}),delim("(endline)"),delim("(begin)"),delim("(end)").reach=!0,delim("</").reach=!0,delim("<!"),delim("<!--"),delim("-->"),delim("(error)").reach=!0,delim("}").reach=!0,delim(")"),delim("]"),delim('"').reach=!0,delim("'").reach=!0,delim(";"),delim(":").reach=!0,delim(","),delim("#"),delim("@"),reserve("else"),reserve("case").reach=!0,reserve("catch"),reserve("default").reach=!0,reserve("finally"),reservevar("arguments",function(x){directive["use strict"]&&funct["(global)"]&&warning("Strict violation.",x)}),reservevar("eval"),reservevar("false"),reservevar("Infinity"),reservevar("NaN"),reservevar("null"),reservevar("this",function(x){directive["use strict"]&&!option.validthis&&(funct["(statement)"]&&funct["(name)"].charAt(0)>"Z"||funct["(global)"])&&warning("Possible strict violation.",x)}),reservevar("true"),reservevar("undefined"),assignop("=","assign",20),assignop("+=","assignadd",20),assignop("-=","assignsub",20),assignop("*=","assignmult",20),assignop("/=","assigndiv",20).nud=function(){error("A regular expression literal can be confused with '/='.")},assignop("%=","assignmod",20),bitwiseassignop("&=","assignbitand",20),bitwiseassignop("|=","assignbitor",20),bitwiseassignop("^=","assignbitxor",20),bitwiseassignop("<<=","assignshiftleft",20),bitwiseassignop(">>=","assignshiftright",20),bitwiseassignop(">>>=","assignshiftrightunsigned",20),infix("?",function(left,that){return that.left=left,that.right=expression(10),advance(":"),that["else"]=expression(10),that},30),infix("||","or",40),infix("&&","and",50),bitwise("|","bitor",70),bitwise("^","bitxor",80),bitwise("&","bitand",90),relation("==",function(left,right){var eqnull=option.eqnull&&(left.value==="null"||right.value==="null");return!eqnull&&option.eqeqeq?warning("Expected '{a}' and instead saw '{b}'.",this,"===","=="):isPoorRelation(left)?warning("Use '{a}' to compare with '{b}'.",this,"===",left.value):isPoorRelation(right)&&warning("Use '{a}' to compare with '{b}'.",this,"===",right.value),this}),relation("==="),relation("!=",function(left,right){var eqnull=option.eqnull&&(left.value==="null"||right.value==="null");return!eqnull&&option.eqeqeq?warning("Expected '{a}' and instead saw '{b}'.",this,"!==","!="):isPoorRelation(left)?warning("Use '{a}' to compare with '{b}'.",this,"!==",left.value):isPoorRelation(right)&&warning("Use '{a}' to compare with '{b}'.",this,"!==",right.value),this}),relation("!=="),relation("<"),relation(">"),relation("<="),relation(">="),bitwise("<<","shiftleft",120),bitwise(">>","shiftright",120),bitwise(">>>","shiftrightunsigned",120),infix("in","in",120),infix("instanceof","instanceof",120),infix("+",function(left,that){var right=expression(130);return left&&right&&left.id==="(string)"&&right.id==="(string)"?(left.value+=right.value,left.character=right.character,!option.scripturl&&jx.test(left.value)&&warning("JavaScript URL.",left),left):(that.left=left,that.right=right,that)},130),prefix("+","num"),prefix("+++",function(){return warning("Confusing pluses."),this.right=expression(150),this.arity="unary",this}),infix("+++",function(left){return warning("Confusing pluses."),this.left=left,this.right=expression(130),this},130),infix("-","sub",130),prefix("-","neg"),prefix("---",function(){return warning("Confusing minuses."),this.right=expression(150),this.arity="unary",this}),infix("---",function(left){return warning("Confusing minuses."),this.left=left,this.right=expression(130),this},130),infix("*","mult",140),infix("/","div",140),infix("%","mod",140),suffix("++","postinc"),prefix("++","preinc"),syntax["++"].exps=!0,suffix("--","postdec"),prefix("--","predec"),syntax["--"].exps=!0,prefix("delete",function(){var p=expression(0);return(!p||p.id!=="."&&p.id!=="[")&&warning("Variables should not be deleted."),this.first=p,this}).exps=!0,prefix("~",function(){return option.bitwise&&warning("Unexpected '{a}'.",this,"~"),expression(150),this}),prefix("!",function(){return this.right=expression(150),this.arity="unary",bang[this.right.id]===!0&&warning("Confusing use of '{a}'.",this,"!"),this}),prefix("typeof","typeof"),prefix("new",function(){var c=expression(155),i;if(c&&c.id!=="function")if(c.identifier){c["new"]=!0;switch(c.value){case"Number":case"String":case"Boolean":case"Math":case"JSON":warning("Do not use {a} as a constructor.",token,c.value);break;case"Function":option.evil||warning("The Function constructor is eval.");break;case"Date":case"RegExp":break;default:c.id!=="function"&&(i=c.value.substr(0,1),option.newcap&&(i<"A"||i>"Z")&&warning("A constructor name should start with an uppercase letter.",token))}}else c.id!=="."&&c.id!=="["&&c.id!=="("&&warning("Bad constructor.",token);else option.supernew||warning("Weird construction. Delete 'new'.",this);return adjacent(token,nexttoken),nexttoken.id!=="("&&!option.supernew&&warning("Missing '()' invoking a constructor."),this.first=c,this}),syntax["new"].exps=!0,prefix("void").exps=!0,infix(".",function(left,that){adjacent(prevtoken,token),nobreak();var m=identifier();return typeof m=="string"&&countMember(m),that.left=left,that.right=m,!left||left.value!=="arguments"||m!=="callee"&&m!=="caller"?!option.evil&&left&&left.value==="document"&&(m==="write"||m==="writeln")&&warning("document.write can be a form of eval.",left):option.noarg?warning("Avoid arguments.{a}.",left,m):directive["use strict"]&&error("Strict violation."),!option.evil&&(m==="eval"||m==="execScript")&&warning("eval is evil."),that},160,!0),infix("(",function(left,that){prevtoken.id!=="}"&&prevtoken.id!==")"&&nobreak(prevtoken,token),nospace(),option.immed&&!left.immed&&left.id==="function"&&warning("Wrap an immediate function invocation in parentheses to assist the reader in understanding that the expression is the result of a function, and not the function itself.");var n=0,p=[];left&&left.type==="(identifier)"&&left.value.match(/^[A-Z]([A-Z0-9_$]*[a-z][A-Za-z0-9_$]*)?$/)&&left.value!=="Number"&&left.value!=="String"&&left.value!=="Boolean"&&left.value!=="Date"&&(left.value==="Math"?warning("Math is not a function.",left):option.newcap&&warning("Missing 'new' prefix when invoking a constructor.",left));if(nexttoken.id!==")")for(;;){p[p.length]=expression(10),n+=1;if(nexttoken.id!==",")break;comma()}return advance(")"),nospace(prevtoken,token),typeof left=="object"&&(left.value==="parseInt"&&n===1&&warning("Missing radix parameter.",left),option.evil||(left.value==="eval"||left.value==="Function"||left.value==="execScript"?warning("eval is evil.",left):p[0]&&p[0].id==="(string)"&&(left.value==="setTimeout"||left.value==="setInterval")&&warning("Implied eval is evil. Pass a function instead of a string.",left)),!left.identifier&&left.id!=="."&&left.id!=="["&&left.id!=="("&&left.id!=="&&"&&left.id!=="||"&&left.id!=="?"&&warning("Bad invocation.",left)),that.left=left,that},155,!0).exps=!0,prefix("(",function(){nospace(),nexttoken.id==="function"&&(nexttoken.immed=!0);var v=expression(0);return advance(")",this),nospace(prevtoken,token),option.immed&&v.id==="function"&&(nexttoken.id==="("||nexttoken.id==="."&&(peek().value==="call"||peek().value==="apply")?warning("Move the invocation into the parens that contain the function.",nexttoken):warning("Do not wrap function literals in parens unless they are to be immediately invoked.",this)),v}),infix("[",function(left,that){nobreak(prevtoken,token),nospace();var e=expression(0),s;return e&&e.type==="(string)"&&(!option.evil&&(e.value==="eval"||e.value==="execScript")&&warning("eval is evil.",that),countMember(e.value),!option.sub&&ix.test(e.value)&&(s=syntax[e.value],(!s||!s.reserved)&&warning("['{a}'] is better written in dot notation.",e,e.value))),advance("]",that),nospace(prevtoken,token),that.left=left,that.right=e,that},160,!0),prefix("[",function(){var b=token.line!==nexttoken.line;this.first=[],b&&(indent+=option.indent,nexttoken.from===indent+option.indent&&(indent+=option.indent));while(nexttoken.id!=="(end)"){while(nexttoken.id===",")warning("Extra comma."),advance(",");if(nexttoken.id==="]")break;b&&token.line!==nexttoken.line&&indentation(),this.first.push(expression(10));if(nexttoken.id!==",")break;comma();if(nexttoken.id==="]"&&!option.es5){warning("Extra comma.",token);break}}return b&&(indent-=option.indent,indentation()),advance("]",this),this},160),function(x){x.nud=function(){function saveProperty(name,token){props[name]&&is_own(props,name)?warning("Duplicate member '{a}'.",nexttoken,i):props[name]={},props[name].basic=!0,props[name].basicToken=token}function saveSetter(name,token){props[name]&&is_own(props,name)?(props[name].basic||props[name].setter)&&warning("Duplicate member '{a}'.",nexttoken,i):props[name]={},props[name].setter=!0,props[name].setterToken=token}function saveGetter(name){props[name]&&is_own(props,name)?(props[name].basic||props[name].getter)&&warning("Duplicate member '{a}'.",nexttoken,i):props[name]={},props[name].getter=!0,props[name].getterToken=token}var b,f,i,j,p,t,props={};b=token.line!==nexttoken.line,b&&(indent+=option.indent,nexttoken.from===indent+option.indent&&(indent+=option.indent));for(;;){if(nexttoken.id==="}")break;b&&indentation();if(nexttoken.value==="get"&&peek().id!==":")advance("get"),option.es5||error("get/set are ES5 features."),i=property_name(),i||error("Missing property name."),saveGetter(i),t=nexttoken,adjacent(token,nexttoken),f=doFunction(),p=f["(params)"],p&&warning("Unexpected parameter '{a}' in get {b} function.",t,p[0],i),adjacent(token,nexttoken);else if(nexttoken.value==="set"&&peek().id!==":")advance("set"),option.es5||error("get/set are ES5 features."),i=property_name(),i||error("Missing property name."),saveSetter(i,nexttoken),t=nexttoken,adjacent(token,nexttoken),f=doFunction(),p=f["(params)"],(!p||p.length!==1)&&warning("Expected a single parameter in set {a} function.",t,i);else{i=property_name(),saveProperty(i,nexttoken);if(typeof i!="string")break;advance(":"),nonadjacent(token,nexttoken),expression(10)}countMember(i);if(nexttoken.id!==",")break;comma(),nexttoken.id===","?warning("Extra comma.",token):nexttoken.id==="}"&&!option.es5&&warning("Extra comma.",token)}b&&(indent-=option.indent,indentation()),advance("}",this);if(option.es5)for(var name in props)is_own(props,name)&&props[name].setter&&!props[name].getter&&warning("Setter is defined without getter.",props[name].setterToken);return this},x.fud=function(){error("Expected to see a statement and instead saw a block.",token)}}(delim("{")),useESNextSyntax=function(){var conststatement=stmt("const",function(prefix){var id,name,value;this.first=[];for(;;){nonadjacent(token,nexttoken),id=identifier(),funct[id]==="const"&&warning("const '"+id+"' has already been declared"),funct["(global)"]&&predefined[id]===!1&&warning("Redefinition of '{a}'.",token,id),addlabel(id,"const");if(prefix)break;name=token,this.first.push(token),nexttoken.id!=="="&&warning("const '{a}' is initialized to 'undefined'.",token,id),nexttoken.id==="="&&(nonadjacent(token,nexttoken),advance("="),nonadjacent(token,nexttoken),nexttoken.id==="undefined"&&warning("It is not necessary to initialize '{a}' to 'undefined'.",token,id),peek(0).id==="="&&nexttoken.identifier&&error("Constant {a} was not declared correctly.",nexttoken,nexttoken.value),value=expression(0),name.first=value);if(nexttoken.id!==",")break;comma()}return this});conststatement.exps=!0};var varstatement=stmt("var",function(prefix){var id,name,value;funct["(onevar)"]&&option.onevar?warning("Too many var statements."):funct["(global)"]||(funct["(onevar)"]=!0),this.first=[];for(;;){nonadjacent(token,nexttoken),id=identifier(),option.esnext&&funct[id]==="const"&&warning("const '"+id+"' has already been declared"),funct["(global)"]&&predefined[id]===!1&&warning("Redefinition of '{a}'.",token,id),addlabel(id,"unused");if(prefix)break;name=token,this.first.push(token),nexttoken.id==="="&&(nonadjacent(token,nexttoken),advance("="),nonadjacent(token,nexttoken),nexttoken.id==="undefined"&&warning("It is not necessary to initialize '{a}' to 'undefined'.",token,id),peek(0).id==="="&&nexttoken.identifier&&error("Variable {a} was not declared correctly.",nexttoken,nexttoken.value),value=expression(0),name.first=value);if(nexttoken.id!==",")break;comma()}return this});varstatement.exps=!0,blockstmt("function",function(){inblock&&warning("Function declarations should not be placed in blocks. Use a function expression or move the statement to the top of the outer function.",token);var i=identifier();return option.esnext&&funct[i]==="const"&&warning("const '"+i+"' has already been declared"),adjacent(token,nexttoken),addlabel(i,"unction"),doFunction(i,!0),nexttoken.id==="("&&nexttoken.line===token.line&&error("Function declarations are not invocable. Wrap the whole function invocation in parens."),this}),prefix("function",function(){var i=optionalidentifier();return i?adjacent(token,nexttoken):nonadjacent(token,nexttoken),doFunction(i),!option.loopfunc&&funct["(loopage)"]&&warning("Don't make functions within a loop."),this}),blockstmt("if",function(){var t=nexttoken;return advance("("),nonadjacent(this,t),nospace(),expression(20),nexttoken.id==="="&&(option.boss||warning("Expected a conditional expression and instead saw an assignment."),advance("="),expression(20)),advance(")",t),nospace(prevtoken,token),block(!0,!0),nexttoken.id==="else"&&(nonadjacent(token,nexttoken),advance("else"),nexttoken.id==="if"||nexttoken.id==="switch"?statement(!0):block(!0,!0)),this}),blockstmt("try",function(){var b,e,s;block(!1),nexttoken.id==="catch"&&(advance("catch"),nonadjacent(token,nexttoken),advance("("),s=scope,scope=Object.create(s),e=nexttoken.value,nexttoken.type!=="(identifier)"?warning("Expected an identifier and instead saw '{a}'.",nexttoken,e):addlabel(e,"exception"),advance(),advance(")"),block(!1),b=!0,scope=s);if(nexttoken.id==="finally"){advance("finally"),block(!1);return}return b||error("Expected '{a}' and instead saw '{b}'.",nexttoken,"catch",nexttoken.value),this}),blockstmt("while",function(){var t=nexttoken;return funct["(breakage)"]+=1,funct["(loopage)"]+=1,advance("("),nonadjacent(this,t),nospace(),expression(20),nexttoken.id==="="&&(option.boss||warning("Expected a conditional expression and instead saw an assignment."),advance("="),expression(20)),advance(")",t),nospace(prevtoken,token),block(!0,!0),funct["(breakage)"]-=1,funct["(loopage)"]-=1,this}).labelled=!0,blockstmt("with",function(){var t=nexttoken;return directive["use strict"]?error("'with' is not allowed in strict mode.",token):option.withstmt||warning("Don't use 'with'.",token),advance("("),nonadjacent(this,t),nospace(),expression(0),advance(")",t),nospace(prevtoken,token),block(!0,!0),this}),blockstmt("switch",function(){var t=nexttoken,g=!1;funct["(breakage)"]+=1,advance("("),nonadjacent(this,t),nospace(),this.condition=expression(20),advance(")",t),nospace(prevtoken,token),nonadjacent(token,nexttoken),t=nexttoken,advance("{"),nonadjacent(token,nexttoken),indent+=option.indent,this.cases=[];for(;;)switch(nexttoken.id){case"case":switch(funct["(verb)"]){case"break":case"case":case"continue":case"return":case"switch":case"throw":break;default:ft.test(lines[nexttoken.line-2])||warning("Expected a 'break' statement before 'case'.",token)}indentation(-option.indent),advance("case"),this.cases.push(expression(20)),g=!0,advance(":"),funct["(verb)"]="case";break;case"default":switch(funct["(verb)"]){case"break":case"continue":case"return":case"throw":break;default:ft.test(lines[nexttoken.line-2])||warning("Expected a 'break' statement before 'default'.",token)}indentation(-option.indent),advance("default"),g=!0,advance(":");break;case"}":indent-=option.indent,indentation(),advance("}",t);if(this.cases.length===1||this.condition.id==="true"||this.condition.id==="false")option.onecase||warning("This 'switch' should be an 'if'.",this);funct["(breakage)"]-=1,funct["(verb)"]=undefined;return;case"(end)":error("Missing '{a}'.",nexttoken,"}");return;default:if(g)switch(token.id){case",":error("Each value should have its own case label.");return;case":":g=!1,statements();break;default:error("Missing ':' on a case clause.",token);return}else{if(token.id!==":"){error("Expected '{a}' and instead saw '{b}'.",nexttoken,"case",nexttoken.value);return}advance(":"),error("Unexpected '{a}'.",token,":"),statements()}}}).labelled=!0,stmt("debugger",function(){return option.debug||warning("All 'debugger' statements should be removed."),this}).exps=!0,function(){var x=stmt("do",function(){funct["(breakage)"]+=1,funct["(loopage)"]+=1,this.first=block(!0),advance("while");var t=nexttoken;return nonadjacent(token,t),advance("("),nospace(),expression(20),nexttoken.id==="="&&(option.boss||warning("Expected a conditional expression and instead saw an assignment."),advance("="),expression(20)),advance(")",t),nospace(prevtoken,token),funct["(breakage)"]-=1,funct["(loopage)"]-=1,this});x.labelled=!0,x.exps=!0}(),blockstmt("for",function(){var s,t=nexttoken;funct["(breakage)"]+=1,funct["(loopage)"]+=1,advance("("),nonadjacent(this,t),nospace();if(peek(nexttoken.id==="var"?1:0).id==="in"){if(nexttoken.id==="var")advance("var"),varstatement.fud.call(varstatement,!0);else{switch(funct[nexttoken.value]){case"unused":funct[nexttoken.value]="var";break;case"var":break;default:warning("Bad for in variable '{a}'.",nexttoken,nexttoken.value)}advance()}return advance("in"),expression(20),advance(")",t),s=block(!0,!0),option.forin&&s&&(s.length>1||typeof s[0]!="object"||s[0].value!=="if")&&warning("The body of a for in should be wrapped in an if statement to filter unwanted properties from the prototype.",this),funct["(breakage)"]-=1,funct["(loopage)"]-=1,this}if(nexttoken.id!==";")if(nexttoken.id==="var")advance("var"),varstatement.fud.call(varstatement);else for(;;){expression(0,"for");if(nexttoken.id!==",")break;comma()}nolinebreak(token),advance(";"),nexttoken.id!==";"&&(expression(20),nexttoken.id==="="&&(option.boss||warning("Expected a conditional expression and instead saw an assignment."),advance("="),expression(20))),nolinebreak(token),advance(";"),nexttoken.id===";"&&error("Expected '{a}' and instead saw '{b}'.",nexttoken,")",";");if(nexttoken.id!==")")for(;;){expression(0,"for");if(nexttoken.id!==",")break;comma()}return advance(")",t),nospace(prevtoken,token),block(!0,!0),funct["(breakage)"]-=1,funct["(loopage)"]-=1,this}).labelled=!0,stmt("break",function(){var v=nexttoken.value;return funct["(breakage)"]===0&&warning("Unexpected '{a}'.",nexttoken,this.value),option.asi||nolinebreak(this),nexttoken.id!==";"&&token.line===nexttoken.line&&(funct[v]!=="label"?warning("'{a}' is not a statement label.",nexttoken,v):scope[v]!==funct&&warning("'{a}' is out of scope.",nexttoken,v),this.first=nexttoken,advance()),reachable("break"),this}).exps=!0,stmt("continue",function(){var v=nexttoken.value;return funct["(breakage)"]===0&&warning("Unexpected '{a}'.",nexttoken,this.value),option.asi||nolinebreak(this),nexttoken.id!==";"?token.line===nexttoken.line&&(funct[v]!=="label"?warning("'{a}' is not a statement label.",nexttoken,v):scope[v]!==funct&&warning("'{a}' is out of scope.",nexttoken,v),this.first=nexttoken,advance()):funct["(loopage)"]||warning("Unexpected '{a}'.",nexttoken,this.value),reachable("continue"),this}).exps=!0,stmt("return",function(){return this.line===nexttoken.line?(nexttoken.id==="(regexp)"&&warning("Wrap the /regexp/ literal in parens to disambiguate the slash operator."),nexttoken.id!==";"&&!nexttoken.reach&&(nonadjacent(token,nexttoken),peek().value==="="&&!option.boss&&warningAt("Did you mean to return a conditional instead of an assignment?",token.line,token.character+1),this.first=expression(0))):option.asi||nolinebreak(this),reachable("return"),this}).exps=!0,stmt("throw",function(){return nolinebreak(this),nonadjacent(token,nexttoken),this.first=expression(20),reachable("throw"),this}).exps=!0,reserve("class"),reserve("const"),reserve("enum"),reserve("export"),reserve("extends"),reserve("import"),reserve("super"),reserve("let"),reserve("yield"),reserve("implements"),reserve("interface"),reserve("package"),reserve("private"),reserve("protected"),reserve("public"),reserve("static");var itself=function(s,o,g){var a,i,k;JSHINT.errors=[],JSHINT.undefs=[],predefined=Object.create(standard),combine(predefined,g||{});if(o){a=o.predef;if(a)if(Array.isArray(a))for(i=0;i<a.length;i+=1)predefined[a[i]]=!0;else if(typeof a=="object"){k=Object.keys(a);for(i=0;i<k.length;i+=1)predefined[k[i]]=!!a[k[i]]}option=o}else option={};option.indent=option.indent||4,option.maxerr=option.maxerr||50,tab="";for(i=0;i<option.indent;i+=1)tab+=" ";indent=1,global=Object.create(predefined),scope=global,funct={"(global)":!0,"(name)":"(global)","(scope)":scope,"(breakage)":0,"(loopage)":0},functions=[funct],urls=[],stack=null,member={},membersOnly=null,implied={},inblock=!1,lookahead=[],jsonmode=!1,warnings=0,lex.init(s),prereg=!0,directive={},prevtoken=token=nexttoken=syntax["(begin)"];for(var name in o)is_own(o,name)&&checkOption(name,token);assume(),combine(predefined,g||{}),comma.first=!0;try{advance();switch(nexttoken.id){case"{":case"[":option.laxbreak=!0,jsonmode=!0,jsonValue();break;default:directives(),directive["use strict"]&&!option.globalstrict&&warning('Use the function form of "use strict".',prevtoken),statements()}advance("(end)");var markDefined=function(name,context){do{if(typeof context[name]=="string")return context[name]==="unused"?context[name]="var":context[name]==="unction"&&(context[name]="closure"),!0;context=context["(context)"]}while(context);return!1},clearImplied=function(name,line){if(!implied[name])return;var newImplied=[];for(var i=0;i<implied[name].length;i+=1)implied[name][i]!==line&&newImplied.push(implied[name][i]);newImplied.length===0?delete implied[name]:implied[name]=newImplied};for(i=0;i<JSHINT.undefs.length;i+=1)k=JSHINT.undefs[i].slice(0),markDefined(k[2].value,k[0])?clearImplied(k[2].value,k[2].line):warning.apply(warning,k.slice(1))}catch(e){if(e){var nt=nexttoken||{};JSHINT.errors.push({raw:e.raw,reason:e.message,line:e.line||nt.line,character:e.character||nt.from},null)}}return JSHINT.errors.length===0};return itself.data=function(){var data={functions:[],options:option},fu,globals,implieds=[],f,i,j,members=[],n,unused=[],v;itself.errors.length&&(data.errors=itself.errors),jsonmode&&(data.json=!0);for(n in implied)is_own(implied,n)&&implieds.push({name:n,line:implied[n]});implieds.length>0&&(data.implieds=implieds),urls.length>0&&(data.urls=urls),globals=Object.keys(scope),globals.length>0&&(data.globals=globals);for(i=1;i<functions.length;i+=1){f=functions[i],fu={};for(j=0;j<functionicity.length;j+=1)fu[functionicity[j]]=[];for(n in f)is_own(f,n)&&n.charAt(0)!=="("&&(v=f[n],v==="unction"&&(v="unused"),Array.isArray(fu[v])&&(fu[v].push(n),v==="unused"&&unused.push({name:n,line:f["(line)"],"function":f["(name)"]})));for(j=0;j<functionicity.length;j+=1)fu[functionicity[j]].length===0&&delete fu[functionicity[j]];fu.name=f["(name)"],fu.param=f["(params)"],fu.line=f["(line)"],fu.last=f["(last)"],data.functions.push(fu)}unused.length>0&&(data.unused=unused),members=[];for(n in member)if(typeof member[n]=="number"){data.member=member;break}return data},itself.report=function(option){function detail(h,array){var b,i,singularity;if(array){o.push("<div><i>"+h+"</i> "),array=array.sort();for(i=0;i<array.length;i+=1)array[i]!==singularity&&(singularity=array[i],o.push((b?", ":"")+singularity),b=!0);o.push("</div>")}}var data=itself.data(),a=[],c,e,err,f,i,k,l,m="",n,o=[],s;if(data.errors||data.implieds||data.unused){err=!0,o.push("<div id=errors><i>Error:</i>");if(data.errors)for(i=0;i<data.errors.length;i+=1)c=data.errors[i],c&&(e=c.evidence||"",o.push("<p>Problem"+(isFinite(c.line)?" at line "+c.line+" character "+c.character:"")+": "+c.reason.entityify()+"</p><p class=evidence>"+(e&&(e.length>80?e.slice(0,77)+"...":e).entityify())+"</p>"));if(data.implieds){s=[];for(i=0;i<data.implieds.length;i+=1)s[i]="<code>"+data.implieds[i].name+"</code>&nbsp;<i>"+data.implieds[i].line+"</i>";o.push("<p><i>Implied global:</i> "+s.join(", ")+"</p>")}if(data.unused){s=[];for(i=0;i<data.unused.length;i+=1)s[i]="<code><u>"+data.unused[i].name+"</u></code>&nbsp;<i>"+data.unused[i].line+"</i> <code>"+data.unused[i]["function"]+"</code>";o.push("<p><i>Unused variable:</i> "+s.join(", ")+"</p>")}data.json&&o.push("<p>JSON: bad.</p>"),o.push("</div>")}if(!option){o.push("<br><div id=functions>"),data.urls&&detail("URLs<br>",data.urls,"<br>"),data.json&&!err?o.push("<p>JSON: good.</p>"):data.globals?o.push("<div><i>Global</i> "+data.globals.sort().join(", ")+"</div>"):o.push("<div><i>No new global variables introduced.</i></div>");for(i=0;i<data.functions.length;i+=1)f=data.functions[i],o.push("<br><div class=function><i>"+f.line+"-"+f.last+"</i> "+(f.name||"")+"("+(f.param?f.param.join(", "):"")+")</div>"),detail("<big><b>Unused</b></big>",f.unused),detail("Closure",f.closure),detail("Variable",f["var"]),detail("Exception",f.exception),detail("Outer",f.outer),detail("Global",f.global),detail("Label",f.label);if(data.member){a=Object.keys(data.member);if(a.length){a=a.sort(),m="<br><pre id=members>/*members ",l=10;for(i=0;i<a.length;i+=1)k=a[i],n=k.name(),l+n.length>72&&(o.push(m+"<br>"),m="    ",l=1),l+=n.length+2,data.member[k]===1&&(n="<i>"+n+"</i>"),i<a.length-1&&(n+=", "),m+=n;o.push(m+"<br>*/</pre>")}o.push("</div>")}}return o.join("")},itself.jshint=itself,itself}();typeof exports=="object"&&exports&&(exports.JSHINT=JSHINT)}),define("ace/narcissus/parser",["require","exports","module","ace/narcissus/lexer","ace/narcissus/definitions","ace/narcissus/options"],function(require,exports,module){function pushDestructuringVarDecls(n,s){for(var i in n){var sub=n[i];sub.type===IDENTIFIER?s.varDecls.push(sub):pushDestructuringVarDecls(sub,s)}}function Parser(tokenizer){tokenizer.parser=this,this.t=tokenizer,this.x=null,this.unexpectedEOF=!1,options.mozillaMode&&(this.mozillaMode=!0),options.parenFreeMode&&(this.parenFreeMode=!0)}function StaticContext(parentScript,parentBlock,inModule,inFunction,strictMode){this.parentScript=parentScript,this.parentBlock=parentBlock||parentScript,this.inModule=inModule||!1,this.inFunction=inFunction||!1,this.inForLoopInit=!1,this.topLevel=!0,this.allLabels=new Stack,this.currentLabels=new Stack,this.labeledTargets=new Stack,this.defaultLoopTarget=null,this.defaultTarget=null,this.strictMode=strictMode}function Pragma(n){if(n.type===SEMICOLON){var e=n.expression;if(e.type===STRING&&e.value==="use strict")return n.pragma="strict",!0}return!1}function Node(t,init){var token=t.token;token?(this.type=token.type,this.value=token.value,this.lineno=token.lineno,this.start=token.start,this.end=token.end):this.lineno=t.lineno,this.filename=t.filename,this.children=[];for(var prop in init)this[prop]=init[prop]}function SyntheticNode(init){this.children=[];for(var prop in init)this[prop]=init[prop];this.synthetic=!0}function unevalableConst(code){var token=definitions.tokens[code],constName=definitions.opTypeNames.hasOwnProperty(token)?definitions.opTypeNames[token]:token in definitions.keywords?token.toUpperCase():token;return{toSource:function(){return constName}}}function tokenString(tt){var t=definitions.tokens[tt];return/^\W/.test(t)?definitions.opTypeNames[t]:t.toUpperCase()}function blockInit(){return{type:BLOCK,varDecls:[]}}function scriptInit(){return{type:SCRIPT,funDecls:[],varDecls:[],modDefns:new Dict,modAssns:new Dict,modDecls:new Dict,modLoads:new Dict,impDecls:[],expDecls:[],exports:new Dict,hasEmptyReturn:!1,hasReturnWithValue:!1,hasYield:!1}}function Export(node,isDefinition){this.node=node,this.isDefinition=isDefinition,this.resolved=null}function registerExport(exports,decl){function register(name,exp){if(exports.has(name))throw new SyntaxError("multiple exports of "+name);exports.set(name,exp)}switch(decl.type){case MODULE:case FUNCTION:register(decl.name,new Export(decl,!0));break;case VAR:for(var i=0;i<decl.children.length;i++)register(decl.children[i].name,new Export(decl.children[i],!0));break;case LET:case CONST:throw new Error("NYI: "+definitions.tokens[decl.type]);case EXPORT:for(var i=0;i<decl.pathList.length;i++){var path=decl.pathList[i];switch(path.type){case OBJECT_INIT:for(var j=0;j<path.children.length;j++){var init=path.children[j];init.type===IDENTIFIER?register(init.value,new Export(init,!1)):register(init.children[0].value,new Export(init.children[1],!1))}break;case DOT:register(path.children[1].value,new Export(path,!1));break;case IDENTIFIER:register(path.value,new Export(path,!1));break;default:throw new Error("unexpected export path: "+definitions.tokens[path.type])}}break;default:throw new Error("unexpected export decl: "+definitions.tokens[exp.type])}}function Module(node){var exports=node.body.exports,modDefns=node.body.modDefns,exportedModules=new Dict;exports.forEach(function(name,exp){var node=exp.node;if(node.type===MODULE)exportedModules.set(name,node);else if(!exp.isDefinition&&node.type===IDENTIFIER&&modDefns.has(node.value)){var mod=modDefns.get(node.value);exportedModules.set(name,mod)}}),this.node=node,this.exports=exports,this.exportedModules=exportedModules}function isPragmaToken(tt){switch(tt){case IDENTIFIER:case STRING:case NUMBER:case NULL:case TRUE:case FALSE:return!0}return!1}function parse(s,f,l){var t=new Tokenizer(s,f,l,options.allowHTMLComments),p=new Parser(t);return p.Script(!1,!1,!0)}function parseFunction(s,requireName,form,f,l){var t=new Tokenizer(s,f,l),p=new Parser(t);return p.x=new StaticContext(null,null,!1,!1,!1),p.FunctionDefinition(requireName,form)}function parseStdin(s,ln,prefix,isCommand){if(s.match(/^[\s]*\.begin[\s]*$/))return++ln.value,parseMultiline(ln,prefix);isCommand(s.trim())&&(s="");for(;;)try{var t=new Tokenizer(s,"stdin",ln.value,!1),p=new Parser(t),n=p.Script(!1,!1);return ln.value=t.lineno,n}catch(e){if(!p.unexpectedEOF)throw e;var more;do{prefix&&putstr(prefix),more=readline();if(!more)throw e}while(isCommand(more.trim()));s+="\n"+more}}function parseMultiline(ln,prefix){var s="";for(;;){prefix&&putstr(prefix);var more=readline();if(more===null)return null;if(more.match(/^[\s]*\.end[\s]*$/))break;s+="\n"+more}var t=new Tokenizer(s,"stdin",ln.value,!1),p=new Parser(t),n=p.Script(!1,!1);return ln.value=t.lineno,n}var lexer=require("./lexer"),definitions=require("./definitions"),options=require("./options"),Tokenizer=lexer.Tokenizer,Dict=definitions.Dict,Stack=definitions.Stack;eval(definitions.consts),StaticContext.prototype={update:function(ext){var desc={};for(var key in ext)desc[key]={value:ext[key],writable:!0,enumerable:!0,configurable:!0};return Object.create(this,desc)},pushLabel:function(label){return this.update({currentLabels:this.currentLabels.push(label),allLabels:this.allLabels.push(label)})},pushTarget:function(target){var isDefaultLoopTarget=target.isLoop,isDefaultTarget=isDefaultLoopTarget||target.type===SWITCH;return this.currentLabels.isEmpty()?(isDefaultLoopTarget&&this.update({defaultLoopTarget:target}),isDefaultTarget&&this.update({defaultTarget:target}),this):(target.labels=new Dict,this.currentLabels.forEach(function(label){target.labels.set(label,!0)}),this.update({currentLabels:new Stack,labeledTargets:this.labeledTargets.push(target),defaultLoopTarget:isDefaultLoopTarget?target:this.defaultLoopTarget,defaultTarget:isDefaultTarget?target:this.defaultTarget}))},nest:function(){return this.topLevel?this.update({topLevel:!1}):this},canImport:function(){return this.topLevel&&!this.inFunction},canExport:function(){return this.inModule&&this.topLevel&&!this.inFunction},banWith:function(){return this.strictMode||this.inModule},modulesAllowed:function(){return this.topLevel&&!this.inFunction}};var Pp=Parser.prototype;Pp.mozillaMode=!1,Pp.parenFreeMode=!1,Pp.withContext=function(x,f){var x0=this.x;this.x=x;var result=f.call(this);return this.x=x0,result},Pp.newNode=function(opts){return new Node(this.t,opts)},Pp.fail=function(msg){throw this.t.newSyntaxError(msg)},Pp.match=function(tt,scanOperand,keywordIsName){return this.t.match(tt,scanOperand,keywordIsName)},Pp.mustMatch=function(tt,keywordIsName){return this.t.mustMatch(tt,keywordIsName)},Pp.peek=function(scanOperand){return this.t.peek(scanOperand)},Pp.peekOnSameLine=function(scanOperand){return this.t.peekOnSameLine(scanOperand)},Pp.done=function(){return this.t.done},Pp.Script=function(inModule,inFunction,expectEnd){var node=this.newNode(scriptInit()),x2=new StaticContext(node,node,inModule,inFunction);return this.withContext(x2,function(){this.Statements(node,!0)}),expectEnd&&!this.done()&&this.fail("expected end of input"),node};var Np=Node.prototype=SyntheticNode.prototype={};Np.constructor=Node;var TO_SOURCE_SKIP={type:!0,value:!0,lineno:!0,start:!0,end:!0,tokenizer:!0,assignOp:!0};Np.toSource=function(){var mock={},self=this;mock.type=unevalableConst(this.type);if(this.generatingSource)return mock.toSource();this.generatingSource=!0,"value"in this&&(mock.value=this.value),"lineno"in this&&(mock.lineno=this.lineno),"start"in this&&(mock.start=this.start),"end"in this&&(mock.end=this.end),this.assignOp&&(mock.assignOp=unevalableConst(this.assignOp));for(var key in this)this.hasOwnProperty(key)&&!(key in TO_SOURCE_SKIP)&&(mock[key]=this[key]);try{return mock.toSource()}finally{delete this.generatingSource}},Np.push=function(kid){return kid!==null&&(kid.start<this.start&&(this.start=kid.start),this.end<kid.end&&(this.end=kid.end)),this.children.push(kid)},Node.indentLevel=0,Np.toString=function(){var a=[];for(var i in this)this.hasOwnProperty(i)&&i!=="type"&&i!=="target"&&a.push({id:i,value:this[i]});a.sort(function(a,b){return a.id<b.id?-1:1});var INDENTATION="    ",n=++Node.indentLevel,s="{\n"+INDENTATION.repeat(n)+"type: "+tokenString(this.type);for(i=0;i<a.length;i++)s+=",\n"+INDENTATION.repeat(n)+a[i].id+": "+a[i].value;return n=--Node.indentLevel,s+="\n"+INDENTATION.repeat(n)+"}",s},Np.synth=function(init){var node=new SyntheticNode(init);return node.filename=this.filename,node.lineno=this.lineno,node.start=this.start,node.end=this.end,node};var LOOP_INIT={isLoop:!0};definitions.defineGetter(Np,"length",function(){throw new Error("Node.prototype.length is gone; use n.children.length instead")}),definitions.defineProperty(String.prototype,"repeat",function(n){var s="",t=this+s;while(--n>=0)s+=t;return s},!1,!1,!0),Pp.MaybeLeftParen=function(){return this.parenFreeMode?this.match(LEFT_PAREN)?LEFT_PAREN:END:this.mustMatch(LEFT_PAREN).type},Pp.MaybeRightParen=function(p){p===LEFT_PAREN&&this.mustMatch(RIGHT_PAREN)},Pp.Statements=function(n,topLevel){var prologue=!!topLevel;try{while(!this.done()&&this.peek(!0)!==RIGHT_CURLY){var n2=this.Statement();n.push(n2),prologue&&Pragma(n2)?(this.x.strictMode=!0,n.strict=!0):prologue=!1}}catch(e){try{this.done()&&(this.unexpectedEOF=!0)}catch(e){}throw e}},Pp.Block=function(){this.mustMatch(LEFT_CURLY);var n=this.newNode(blockInit()),x2=this.x.update({parentBlock:n}).pushTarget(n);return this.withContext(x2,function(){this.Statements(n)}),this.mustMatch(RIGHT_CURLY),n};var DECLARED_FORM=0,EXPRESSED_FORM=1,STATEMENT_FORM=2;Pp.Statement=function(){var i,label,n,n2,p,c,ss,tt=this.t.get(!0),tt2,x0,x2,x3,comments=this.t.blockComments;switch(tt){case IMPORT:this.x.canImport()||this.fail("illegal context for import statement"),n=this.newNode(),n.pathList=this.ImportPathList(),this.x.parentScript.impDecls.push(n);break;case EXPORT:this.x.canExport()||this.fail("export statement not in module top level");switch(this.peek()){case MODULE:case FUNCTION:case LET:case VAR:case CONST:return n=this.Statement(),n.blockComments=comments,n.exported=!0,this.x.parentScript.expDecls.push(n),registerExport(this.x.parentScript.exports,n),n}n=this.newNode(),n.pathList=this.ExportPathList(),this.x.parentScript.expDecls.push(n),registerExport(this.x.parentScript.exports,n);break;case FUNCTION:return this.FunctionDefinition(!0,this.x.topLevel?DECLARED_FORM:STATEMENT_FORM,comments);case LEFT_CURLY:return n=this.newNode(blockInit()),x2=this.x.update({parentBlock:n}).pushTarget(n).nest(),this.withContext(x2,function(){this.Statements(n)}),this.mustMatch(RIGHT_CURLY),n;case IF:return n=this.newNode(),n.condition=this.HeadExpression(),x2=this.x.pushTarget(n).nest(),this.withContext(x2,function(){n.thenPart=this.Statement(),n.elsePart=this.match(ELSE,!0)?this.Statement():null}),n;case SWITCH:return n=this.newNode({cases:[],defaultIndex:-1}),n.discriminant=this.HeadExpression(),x2=this.x.pushTarget(n).nest(),this.withContext(x2,function(){this.mustMatch(LEFT_CURLY);while((tt=this.t.get())!==RIGHT_CURLY){switch(tt){case DEFAULT:n.defaultIndex>=0&&this.fail("More than one switch default");case CASE:n2=this.newNode(),tt===DEFAULT?n.defaultIndex=n.cases.length:n2.caseLabel=this.Expression(COLON);break;default:this.fail("Invalid switch case")}this.mustMatch(COLON),n2.statements=this.newNode(blockInit());while((tt=this.peek(!0))!==CASE&&tt!==DEFAULT&&tt!==RIGHT_CURLY)n2.statements.push(this.Statement());n.cases.push(n2)}}),n;case FOR:return n=this.newNode(LOOP_INIT),n.blockComments=comments,this.match(IDENTIFIER)&&(this.t.token.value==="each"?n.isEach=!0:this.t.unget()),this.parenFreeMode||this.mustMatch(LEFT_PAREN),x2=this.x.pushTarget(n).nest(),x3=this.x.update({inForLoopInit:!0}),n2=null,(tt=this.peek(!0))!==SEMICOLON&&this.withContext(x3,function(){tt===VAR||tt===CONST?(this.t.get(),n2=this.Variables()):tt===LET?(this.t.get(),this.peek()===LEFT_PAREN?n2=this.LetBlock(!1):(this.x.parentBlock=n,n.varDecls=[],n2=this.Variables())):n2=this.Expression()}),n2&&this.match(IN)?(n.type=FOR_IN,this.withContext(x3,function(){n.object=this.Expression();if(n2.type===VAR||n2.type===LET){c=n2.children;if(c.length!==1&&n2.destructurings.length!==1)throw new SyntaxError("Invalid for..in left-hand side",this.filename,n2.lineno);n2.destructurings.length>0?n.iterator=n2.destructurings[0]:n.iterator=c[0],n.varDecl=n2}else{if(n2.type===ARRAY_INIT||n2.type===OBJECT_INIT)n2.destructuredNames=this.checkDestructuring(n2);n.iterator=n2}})):(x3.inForLoopInit=!1,n.setup=n2,this.mustMatch(SEMICOLON),n.isEach&&this.fail("Invalid for each..in loop"),this.withContext(x3,function(){n.condition=this.peek(!0)===SEMICOLON?null:this.Expression(),this.mustMatch(SEMICOLON),tt2=this.peek(!0),n.update=(this.parenFreeMode?tt2===LEFT_CURLY||definitions.isStatementStartCode[tt2]:tt2===RIGHT_PAREN)?null:this.Expression()})),this.parenFreeMode||this.mustMatch(RIGHT_PAREN),this.withContext(x2,function(){n.body=this.Statement()}),n;case WHILE:return n=this.newNode({isLoop:!0}),n.blockComments=comments,n.condition=this.HeadExpression(),x2=this.x.pushTarget(n).nest(),this.withContext(x2,function(){n.body=this.Statement()}),n;case DO:return n=this.newNode({isLoop:!0}),n.blockComments=comments,x2=this.x.pushTarget(n).next(),this.withContext(x2,function(){n.body=this.Statement()}),this.mustMatch(WHILE),n.condition=this.HeadExpression(),this.match(SEMICOLON),n;case BREAK:case CONTINUE:n=this.newNode(),n.blockComments=comments,x2=this.x.pushTarget(n),this.peekOnSameLine()===IDENTIFIER&&(this.t.get(),n.label=this.t.token.value),n.label?n.target=x2.labeledTargets.find(function(target){return target.labels.has(n.label)}):tt===CONTINUE?n.target=x2.defaultLoopTarget:n.target=x2.defaultTarget,n.target||this.fail("Invalid "+(tt===BREAK?"break":"continue")),!n.target.isLoop&&tt===CONTINUE&&this.fail("Invalid continue");break;case TRY:n=this.newNode({catchClauses:[]}),n.blockComments=comments,n.tryBlock=this.Block();while(this.match(CATCH)){n2=this.newNode(),p=this.MaybeLeftParen();switch(this.t.get()){case LEFT_BRACKET:case LEFT_CURLY:this.t.unget(),n2.varName=this.DestructuringExpression(!0);break;case IDENTIFIER:n2.varName=this.t.token.value;break;default:this.fail("missing identifier in catch")}this.match(IF)&&(this.mozillaMode||this.fail("Illegal catch guard"),n.catchClauses.length&&!n.catchClauses.top().guard&&this.fail("Guarded catch after unguarded"),n2.guard=this.Expression()),this.MaybeRightParen(p),n2.block=this.Block(),n.catchClauses.push(n2)}return this.match(FINALLY)&&(n.finallyBlock=this.Block()),!n.catchClauses.length&&!n.finallyBlock&&this.fail("Invalid try statement"),n;case CATCH:case FINALLY:this.fail(definitions.tokens[tt]+" without preceding try");case THROW:n=this.newNode(),n.exception=this.Expression();break;case RETURN:n=this.ReturnOrYield();break;case WITH:return this.x.banWith()&&this.fail("with statements not allowed in strict code or modules"),n=this.newNode(),n.blockComments=comments,n.object=this.HeadExpression(),x2=this.x.pushTarget(n).next(),this.withContext(x2,function(){n.body=this.Statement()}),n;case VAR:case CONST:n=this.Variables();break;case LET:if(this.peek()===LEFT_PAREN)return n=this.LetBlock(!0),n;n=this.Variables();break;case DEBUGGER:n=this.newNode();break;case NEWLINE:case SEMICOLON:return n=this.newNode({type:SEMICOLON}),n.blockComments=comments,n.expression=null,n;case IDENTIFIER:case USE:case MODULE:switch(this.t.token.value){case"use":if(!isPragmaToken(this.peekOnSameLine())){this.t.unget();break}return this.newNode({type:USE,params:this.Pragmas()});case"module":this.x.modulesAllowed()||this.fail("module declaration not at top level"),this.x.parentScript.hasModules=!0,tt=this.peekOnSameLine();if(tt!==IDENTIFIER&&tt!==LEFT_CURLY){this.t.unget();break}n=this.newNode({type:MODULE}),n.blockComments=comments,this.mustMatch(IDENTIFIER),label=this.t.token.value;if(this.match(LEFT_CURLY))return n.name=label,n.body=this.Script(!0,!1),n.module=new Module(n),this.mustMatch(RIGHT_CURLY),this.x.parentScript.modDefns.set(n.name,n),n;return this.t.unget(),this.ModuleVariables(n),n;default:tt=this.peek();if(tt===COLON)return label=this.t.token.value,this.x.allLabels.has(label)&&this.fail("Duplicate label: "+label),this.t.get(),n=this.newNode({type:LABEL,label:label}),n.blockComments=comments,x2=this.x.pushLabel(label).nest(),this.withContext(x2,function(){n.statement=this.Statement()}),n.target=n.statement.type===LABEL?n.statement.target:n.statement,n};default:n=this.newNode({type:SEMICOLON}),this.t.unget(),n.blockComments=comments,n.expression=this.Expression(),n.end=n.expression.end}return n.blockComments=comments,this.MagicalSemicolon(),n},Pp.Pragmas=function(){var pragmas=[];do pragmas.push(this.Pragma());while(this.match(COMMA));return this.MagicalSemicolon(),pragmas},Pp.Pragma=function(){var items=[],tt;do tt=this.t.get(!0),items.push(this.t.token);while(isPragmaToken(this.peek()));return items},Pp.MagicalSemicolon=function(){var tt;this.t.lineno===this.t.token.lineno&&(tt=this.peekOnSameLine(),tt!==END&&tt!==NEWLINE&&tt!==SEMICOLON&&tt!==RIGHT_CURLY&&this.fail("missing ; before statement")),this.match(SEMICOLON)},Pp.ReturnOrYield=function(){var n,b,tt=this.t.token.type,tt2,parentScript=this.x.parentScript;return tt===RETURN?this.x.inFunction||this.fail("Return not in function"):(this.x.inFunction||this.fail("Yield not in function"),parentScript.hasYield=!0),n=this.newNode({value:undefined}),tt2=tt===RETURN?this.peekOnSameLine(!0):this.peek(!0),tt2!==END&&tt2!==NEWLINE&&tt2!==SEMICOLON&&tt2!==RIGHT_CURLY&&(tt!==YIELD||tt2!==tt&&tt2!==RIGHT_BRACKET&&tt2!==RIGHT_PAREN&&tt2!==COLON&&tt2!==COMMA)?tt===RETURN?(n.value=this.Expression(),parentScript.hasReturnWithValue=!0):n.value=this.AssignExpression():tt===RETURN&&(parentScript.hasEmptyReturn=!0),n},Pp.ModuleExpression=function(){return this.match(STRING)?this.newNode():this.QualifiedPath()},Pp.ImportPathList=function(){var a=[];do a.push(this.ImportPath());while(this.match(COMMA));return a},Pp.ImportPath=function(){var n=this.QualifiedPath();if(!this.match(DOT))return n.type===IDENTIFIER&&this.fail("cannot import local variable"),n;var n2=this.newNode();return n2.push(n),n2.push(this.ImportSpecifierSet()),n2},Pp.ExplicitSpecifierSet=function(SpecifierRHS){var n,n2,id,tt;n=this.newNode({type:OBJECT_INIT}),this.mustMatch(LEFT_CURLY);if(!this.match(RIGHT_CURLY))do id=this.Identifier(),this.match(COLON)?(n2=this.newNode({type:PROPERTY_INIT}),n2.push(id),n2.push(SpecifierRHS()),n.push(n2)):n.push(id);while(!this.match(RIGHT_CURLY)&&this.mustMatch(COMMA));return n},Pp.ImportSpecifierSet=function(){var self=this;return this.match(MUL)?this.newNode({type:IDENTIFIER,name:"*"}):ExplicitSpecifierSet(function(){return self.Identifier()})},Pp.Identifier=function(){return this.mustMatch(IDENTIFIER),this.newNode({type:IDENTIFIER})},Pp.IdentifierName=function(){return this.mustMatch(IDENTIFIER,!0),this.newNode({type:IDENTIFIER})},Pp.QualifiedPath=function(){var n,n2;n=this.Identifier();while(this.match(DOT)){if(this.peek()!==IDENTIFIER){this.t.unget();break}n2=this.newNode(),n2.push(n),n2.push(this.Identifier()),n=n2}return n},Pp.ExportPath=function(){var self=this;return this.peek()===LEFT_CURLY?this.ExplicitSpecifierSet(function(){return self.QualifiedPath()}):this.QualifiedPath()},Pp.ExportPathList=function(){var a=[];do a.push(this.ExportPath());while(this.match(COMMA));return a},Pp.FunctionDefinition=function(requireName,functionForm,comments){var tt,f=this.newNode({params:[],paramComments:[]});typeof comments=="undefined"&&(comments=null),f.blockComments=comments,f.type!==FUNCTION&&(f.type=f.value==="get"?GETTER:SETTER),this.match(MUL)&&(f.isExplicitGenerator=!0),this.match(IDENTIFIER,!1,!0)?f.name=this.t.token.value:requireName&&this.fail("missing function identifier");var inModule=this.x.inModule;x2=new StaticContext(null,null,inModule,!0,this.x.strictMode),this.withContext(x2,function(){this.mustMatch(LEFT_PAREN);if(!this.match(RIGHT_PAREN)){do{tt=this.t.get(),f.paramComments.push(this.t.lastBlockComment());switch(tt){case LEFT_BRACKET:case LEFT_CURLY:this.t.unget(),f.params.push(this.DestructuringExpression());break;case IDENTIFIER:f.params.push(this.t.token.value);break;default:this.fail("missing formal parameter")}}while(this.match(COMMA));this.mustMatch(RIGHT_PAREN)}tt=this.t.get(!0),tt!==LEFT_CURLY&&this.t.unget(),tt!==LEFT_CURLY?f.body=this.AssignExpression():f.body=this.Script(inModule,!0)}),tt===LEFT_CURLY&&this.mustMatch(RIGHT_CURLY),f.end=this.t.token.end,f.functionForm=functionForm,functionForm===DECLARED_FORM&&this.x.parentScript.funDecls.push(f),this.x.inModule&&!f.isExplicitGenerator&&f.body.hasYield&&this.fail("yield in non-generator function");if(f.isExplicitGenerator||f.body.hasYield)f.body=this.newNode({type:GENERATOR,body:f.body});return f},Pp.ModuleVariables=function(n){var n1,n2;do n1=this.Identifier(),this.match(ASSIGN)&&(n2=this.ModuleExpression(),n1.initializer=n2,n2.type===STRING?this.x.parentScript.modLoads.set(n1.value,n2.value):this.x.parentScript.modAssns.set(n1.value,n1)),n.push(n1);while(this.match(COMMA))},Pp.Variables=function(letBlock){var n,n2,ss,i,s,tt;tt=this.t.token.type;switch(tt){case VAR:case CONST:s=this.x.parentScript;break;case LET:s=this.x.parentBlock;break;case LEFT_PAREN:tt=LET,s=letBlock}n=this.newNode({type:tt,destructurings:[]});do{tt=this.t.get();if(tt===LEFT_BRACKET||tt===LEFT_CURLY){this.t.unget();var dexp=this.DestructuringExpression(!0);n2=this.newNode({type:IDENTIFIER,name:dexp,readOnly:n.type===CONST}),n.push(n2),pushDestructuringVarDecls(n2.name.destructuredNames,s),n.destructurings.push({exp:dexp,decl:n2});if(this.x.inForLoopInit&&this.peek()===IN)continue;this.mustMatch(ASSIGN),this.t.token.assignOp&&this.fail("Invalid variable initialization"),n2.blockComment=this.t.lastBlockComment(),n2.initializer=this.AssignExpression();continue}tt!==IDENTIFIER&&this.fail("missing variable name"),n2=this.newNode({type:IDENTIFIER,name:this.t.token.value,readOnly:n.type===CONST}),n.push(n2),s.varDecls.push(n2);if(this.match(ASSIGN)){var comment=this.t.lastBlockComment();this.t.token.assignOp&&this.fail("Invalid variable initialization"),n2.initializer=this.AssignExpression()}else var comment=this.t.lastBlockComment();n2.blockComment=comment}while(this.match(COMMA));return n},Pp.LetBlock=function(isStatement){var n,n2;return n=this.newNode({type:LET_BLOCK,varDecls:[]}),this.mustMatch(LEFT_PAREN),n.variables=this.Variables(n),this.mustMatch(RIGHT_PAREN),isStatement&&this.peek()!==LEFT_CURLY&&(n2=this.newNode({type:SEMICOLON,expression:n}),isStatement=!1),isStatement?n.block=this.Block():n.expression=this.AssignExpression(),n},Pp.checkDestructuring=function(n,simpleNamesOnly){n.type===ARRAY_COMP&&this.fail("Invalid array comprehension left-hand side");if(n.type!==ARRAY_INIT&&n.type!==OBJECT_INIT)return;var lhss={},nn,n2,idx,sub,cc,c=n.children;for(var i=0,j=c.length;i<j;i++){if(!(nn=c[i]))continue;nn.type===PROPERTY_INIT?(cc=nn.children,sub=cc[1],idx=cc[0].value):n.type===OBJECT_INIT?(sub=nn,idx=nn.value):(sub=nn,idx=i),sub.type===ARRAY_INIT||sub.type===OBJECT_INIT?lhss[idx]=this.checkDestructuring(sub,simpleNamesOnly):(simpleNamesOnly&&sub.type!==IDENTIFIER&&this.fail("missing name in pattern"),lhss[idx]=sub)}return lhss},Pp.DestructuringExpression=function(simpleNamesOnly){var n=this.PrimaryExpression();return n.destructuredNames=this.checkDestructuring(n,simpleNamesOnly),n},Pp.GeneratorExpression=function(e){return this.newNode({type:GENERATOR,expression:e,tail:this.ComprehensionTail()})},Pp.ComprehensionTail=function(){var body,n,n2,n3,p;body=this.newNode({type:COMP_TAIL});do{n=this.newNode({type:FOR_IN,isLoop:!0}),this.match(IDENTIFIER)&&(this.mozillaMode&&this.t.token.value==="each"?n.isEach=!0:this.t.unget()),p=this.MaybeLeftParen();switch(this.t.get()){case LEFT_BRACKET:case LEFT_CURLY:this.t.unget(),n.iterator=this.DestructuringExpression();break;case IDENTIFIER:n.iterator=n3=this.newNode({type:IDENTIFIER}),n3.name=n3.value,n.varDecl=n2=this.newNode({type:VAR}),n2.push(n3),this.x.parentScript.varDecls.push(n3);break;default:this.fail("missing identifier")}this.mustMatch(IN),n.object=this.Expression(),this.MaybeRightParen(p),body.push(n)}while(this.match(FOR));return this.match(IF)&&(body.guard=this.HeadExpression()),body},Pp.HeadExpression=function(){var p=this.MaybeLeftParen(),n=this.ParenExpression();this.MaybeRightParen(p);if(p===END&&!n.parenthesized){var tt=this.peek();tt!==LEFT_CURLY&&!definitions.isStatementStartCode[tt]&&this.fail("Unparenthesized head followed by unbraced body")}return n},Pp.ParenExpression=function(){var x2=this.x.update({inForLoopInit:this.x.inForLoopInit&&this.t.token.type===LEFT_PAREN}),n=this.withContext(x2,function(){return this.Expression()});return this.match(FOR)&&(n.type===YIELD&&!n.parenthesized&&this.fail("Yield expression must be parenthesized"),n.type===COMMA&&!n.parenthesized&&this.fail("Generator expression must be parenthesized"),n=this.GeneratorExpression(n)),n},Pp.Expression=function(){var n,n2;n=this.AssignExpression();if(this.match(COMMA)){n2=this.newNode({type:COMMA}),n2.push(n),n=n2;do n2=n.children[n.children.length-1],n2.type===YIELD&&!n2.parenthesized&&this.fail("Yield expression must be parenthesized"),n.push(this.AssignExpression());while(this.match(COMMA))}return n},Pp.AssignExpression=function(){var n,lhs;if(this.match(YIELD,!0))return this.ReturnOrYield();n=this.newNode({type:ASSIGN}),lhs=this.ConditionalExpression();if(!this.match(ASSIGN))return lhs;n.blockComment=this.t.lastBlockComment();switch(lhs.type){case OBJECT_INIT:case ARRAY_INIT:lhs.destructuredNames=this.checkDestructuring(lhs);case IDENTIFIER:case DOT:case INDEX:case CALL:break;default:this.fail("Bad left-hand side of assignment")}return n.assignOp=lhs.assignOp=this.t.token.assignOp,n.push(lhs),n.push(this.AssignExpression()),n},Pp.ConditionalExpression=function(){var n,n2;n=this.OrExpression();if(this.match(HOOK)){n2=n,n=this.newNode({type:HOOK}),n.push(n2);var x2=this.x.update({inForLoopInit:!1});this.withContext(x2,function(){n.push(this.AssignExpression())}),this.match(COLON)||this.fail("missing : after ?"),n.push(this.AssignExpression())}return n},Pp.OrExpression=function(){var n,n2;n=this.AndExpression();while(this.match(OR))n2=this.newNode(),n2.push(n),n2.push(this.AndExpression()),n=n2;return n},Pp.AndExpression=function(){var n,n2;n=this.BitwiseOrExpression();while(this.match(AND))n2=this.newNode(),n2.push(n),n2.push(this.BitwiseOrExpression()),n=n2;return n},Pp.BitwiseOrExpression=function(){var n,n2;n=this.BitwiseXorExpression();while(this.match(BITWISE_OR))n2=this.newNode(),n2.push(n),n2.push(this.BitwiseXorExpression()),n=n2;return n},Pp.BitwiseXorExpression=function(){var n,n2;n=this.BitwiseAndExpression();while(this.match(BITWISE_XOR))n2=this.newNode(),n2.push(n),n2.push(this.BitwiseAndExpression()),n=n2;return n},Pp.BitwiseAndExpression=function(){var n,n2;n=this.EqualityExpression();while(this.match(BITWISE_AND))n2=this.newNode(),n2.push(n),n2.push(this.EqualityExpression()),n=n2;return n},Pp.EqualityExpression=function(){var n,n2;n=this.RelationalExpression();while(this.match(EQ)||this.match(NE)||this.match(STRICT_EQ)||this.match(STRICT_NE))n2=this.newNode(),n2.push(n),n2.push(this.RelationalExpression()),n=n2;return n},Pp.RelationalExpression=function(){var n,n2,x2=this.x.update({inForLoopInit:!1});return this.withContext(x2,function(){n=this.ShiftExpression();while(this.match(LT)||this.match(LE)||this.match(GE)||this.match(GT)||!this.x.inForLoopInit&&this.match(IN)||this.match(INSTANCEOF))n2=this.newNode(),n2.push(n),n2.push(this.ShiftExpression()),n=n2}),n},Pp.ShiftExpression=function(){var n,n2;n=this.AddExpression();while(this.match(LSH)||this.match(RSH)||this.match(URSH))n2=this.newNode(),n2.push(n),n2.push(this.AddExpression()),n=n2;return n},Pp.AddExpression=function(){var n,n2;n=this.MultiplyExpression();while(this.match(PLUS)||this.match(MINUS))n2=this.newNode(),n2.push(n),n2.push(this.MultiplyExpression()),n=n2;return n},Pp.MultiplyExpression=function(){var n,n2;n=this.UnaryExpression();while(this.match(MUL)||this.match(DIV)||this.match(MOD))n2=this.newNode(),n2.push(n),n2.push(this.UnaryExpression()),n=n2;return n},Pp.UnaryExpression=function(){var n,n2,tt;switch(tt=this.t.get(!0)){case DELETE:case VOID:case TYPEOF:case NOT:case BITWISE_NOT:case PLUS:case MINUS:tt===PLUS?n=this.newNode({type:UNARY_PLUS}):tt===MINUS?n=this.newNode({type:UNARY_MINUS}):n=this.newNode(),n.push(this.UnaryExpression());break;case INCREMENT:case DECREMENT:n=this.newNode(),n.push(this.MemberExpression(!0));break;default:this.t.unget(),n=this.MemberExpression(!0),this.t.tokens[this.t.tokenIndex+this.t.lookahead-1&3].lineno===this.t.lineno&&(this.match(INCREMENT)||this.match(DECREMENT))&&(n2=this.newNode({postfix:!0}),n2.push(n),n=n2)}return n},Pp.MemberExpression=function(allowCallSyntax){var n,n2,name,tt;this.match(NEW)?(n=this.newNode(),n.push(this.MemberExpression(!1)),this.match(LEFT_PAREN)&&(n.type=NEW_WITH_ARGS,n.push(this.ArgumentList()))):n=this.PrimaryExpression();while((tt=this.t.get())!==END){switch(tt){case DOT:n2=this.newNode(),n2.push(n),n2.push(this.IdentifierName());break;case LEFT_BRACKET:n2=this.newNode({type:INDEX}),n2.push(n),n2.push(this.Expression()),this.mustMatch(RIGHT_BRACKET);break;case LEFT_PAREN:if(allowCallSyntax){n2=this.newNode({type:CALL}),n2.push(n),n2.push(this.ArgumentList());break};default:return this.t.unget(),n}n=n2}return n},Pp.ArgumentList=function(){var n,n2;n=this.newNode({type:LIST});if(this.match(RIGHT_PAREN,!0))return n;do n2=this.AssignExpression(),n2.type===YIELD&&!n2.parenthesized&&this.peek()===COMMA&&this.fail("Yield expression must be parenthesized"),this.match(FOR)&&(n2=this.GeneratorExpression(n2),(n.children.length>1||this.peek(!0)===COMMA)&&this.fail("Generator expression must be parenthesized")),n.push(n2);while(this.match(COMMA));return this.mustMatch(RIGHT_PAREN),n},Pp.PrimaryExpression=function(){var n,n2,tt=this.t.get(!0);switch(tt){case FUNCTION:n=this.FunctionDefinition(!1,EXPRESSED_FORM);break;case LEFT_BRACKET:n=this.newNode({type:ARRAY_INIT});while((tt=this.peek(!0))!==RIGHT_BRACKET){if(tt===COMMA){this.t.get(),n.push(null);continue}n.push(this.AssignExpression());if(tt!==COMMA&&!this.match(COMMA))break}n.children.length===1&&this.match(FOR)&&(n2=this.newNode({type:ARRAY_COMP,expression:n.children[0],tail:this.ComprehensionTail()}),n=n2),this.mustMatch(RIGHT_BRACKET);break;case LEFT_CURLY:var id,fd;n=this.newNode({type:OBJECT_INIT});e:if(!this.match(RIGHT_CURLY)){do{tt=this.t.get();if(this.t.token.value!=="get"&&this.t.token.value!=="set"||this.peek()!==IDENTIFIER){var comments=this.t.blockComments;switch(tt){case IDENTIFIER:case NUMBER:case STRING:id=this.newNode({type:IDENTIFIER});break;case RIGHT_CURLY:break e;default:if(this.t.token.value in definitions.keywords){id=this.newNode({type:IDENTIFIER});break}this.fail("Invalid property name")}this.match(COLON)?(n2=this.newNode({type:PROPERTY_INIT}),n2.push(id),n2.push(this.AssignExpression()),n2.blockComments=comments,n.push(n2)):(this.peek()!==COMMA&&this.peek()!==RIGHT_CURLY&&this.fail("missing : after property"),n.push(id))}else n.push(this.FunctionDefinition(!0,EXPRESSED_FORM))}while(this.match(COMMA));this.mustMatch(RIGHT_CURLY)}break;case LEFT_PAREN:n=this.ParenExpression(),this.mustMatch(RIGHT_PAREN),n.parenthesized=!0;break;case LET:n=this.LetBlock(!1);break;case NULL:case THIS:case TRUE:case FALSE:case IDENTIFIER:case NUMBER:case STRING:case REGEXP:n=this.newNode();break;default:this.fail("missing operand; found "+definitions.tokens[tt])}return n},exports.parse=parse,exports.parseStdin=parseStdin,exports.parseFunction=parseFunction,exports.Node=Node,exports.DECLARED_FORM=DECLARED_FORM,exports.EXPRESSED_FORM=EXPRESSED_FORM,exports.STATEMENT_FORM=STATEMENT_FORM,exports.Tokenizer=Tokenizer,exports.Parser=Parser,exports.Module=Module,exports.Export=Export}),define("ace/narcissus/lexer",["require","exports","module","ace/narcissus/definitions"],function(require,exports,module){function isValidIdentifierChar(ch,first){if(ch<="")return ch>="a"&&ch<="z"||ch>="A"&&ch<="Z"||ch==="$"||ch==="_"||!first&&ch>="0"&&ch<="9"?!0:!1;var x={};x["x"+ch]=!0,x[ch]=!0;var valid=!1;try{valid=Function("x","return (x."+(first?"":"x")+ch+");")(x)===!0}catch(ex){}return valid}function isIdentifier(str){if(typeof str!="string")return!1;if(str.length===0)return!1;if(!isValidIdentifierChar(str[0],!0))return!1;for(var i=1;i<str.length;i++)if(!isValidIdentifierChar(str[i],!1))return!1;return!0}function Tokenizer(s,f,l,allowHTMLComments){this.cursor=0,this.source=String(s),this.tokens=[],this.tokenIndex=0,this.lookahead=0,this.scanNewlines=!1,this.filename=f||"",this.lineno=l||1,this.allowHTMLComments=allowHTMLComments,this.blockComments=null}var definitions=require("./definitions");eval(definitions.consts);var opTokens={};for(var op in definitions.opTypeNames){if(op==="\n"||op===".")continue;var node=opTokens;for(var i=0;i<op.length;i++){var ch=op[i];ch in node||(node[ch]={}),node=node[ch],node.op=op}}Tokenizer.prototype={get done(){return this.peek(!0)===END},get token(){return this.tokens[this.tokenIndex]},match:function(tt,scanOperand,keywordIsName){return this.get(scanOperand,keywordIsName)===tt||this.unget()},mustMatch:function(tt,keywordIsName){if(!this.match(tt,!1,keywordIsName))throw this.newSyntaxError("Missing "+definitions.tokens[tt].toLowerCase());return this.token},peek:function(scanOperand){var tt,next;return this.lookahead?(next=this.tokens[this.tokenIndex+this.lookahead&3],tt=this.scanNewlines&&next.lineno!==this.lineno?NEWLINE:next.type):(tt=this.get(scanOperand),this.unget()),tt},peekOnSameLine:function(scanOperand){this.scanNewlines=!0;var tt=this.peek(scanOperand);return this.scanNewlines=!1,tt},lastBlockComment:function(){var length=this.blockComments.length;return length?this.blockComments[length-1]:null},skip:function(){var input=this.source;this.blockComments=[];for(;;){var ch=input[this.cursor++],next=input[this.cursor];if(ch==="\r"){if(next==="\n")continue;ch="\n"}if(ch==="\n"&&!this.scanNewlines)this.lineno++;else if(ch==="/"&&next==="*"){var commentStart=++this.cursor;for(;;){ch=input[this.cursor++];if(ch===undefined)throw this.newSyntaxError("Unterminated comment");if(ch==="*"){next=input[this.cursor];if(next==="/"){var commentEnd=this.cursor-1;this.cursor++;break}}else ch==="\n"&&this.lineno++}this.blockComments.push(input.substring(commentStart,commentEnd))}else if(ch==="/"&&next==="/"||this.allowHTMLComments&&ch==="<"&&next==="!"&&input[this.cursor+1]==="-"&&input[this.cursor+2]==="-"&&(this.cursor+=2)){this.cursor++;for(;;){ch=input[this.cursor++],next=input[this.cursor];if(ch===undefined)return;ch==="\r"&&next!=="\n"&&(ch="\n");if(ch==="\n"){this.scanNewlines?this.cursor--:this.lineno++;break}}}else if(!(ch in definitions.whitespace)){this.cursor--;return}}},lexExponent:function(){var input=this.source,next=input[this.cursor];if(next==="e"||next==="E"){this.cursor++,ch=input[this.cursor++];if(ch==="+"||ch==="-")ch=input[this.cursor++];if(ch<"0"||ch>"9")throw this.newSyntaxError("Missing exponent");do ch=input[this.cursor++];while(ch>="0"&&ch<="9");return this.cursor--,!0}return!1},lexZeroNumber:function(ch){var token=this.token,input=this.source;token.type=NUMBER,ch=input[this.cursor++];if(ch==="."){do ch=input[this.cursor++];while(ch>="0"&&ch<="9");this.cursor--,this.lexExponent(),token.value=parseFloat(input.substring(token.start,this.cursor))}else if(ch==="x"||ch==="X"){do ch=input[this.cursor++];while(ch>="0"&&ch<="9"||ch>="a"&&ch<="f"||ch>="A"&&ch<="F");this.cursor--,token.value=parseInt(input.substring(token.start,this.cursor))}else if(ch>="0"&&ch<="7"){do ch=input[this.cursor++];while(ch>="0"&&ch<="7");this.cursor--,token.value=parseInt(input.substring(token.start,this.cursor))}else this.cursor--,this.lexExponent(),token.value=0},lexNumber:function(ch){var token=this.token,input=this.source;token.type=NUMBER;var floating=!1;do ch=input[this.cursor++],ch==="."&&!floating&&(floating=!0,ch=input[this.cursor++]);while(ch>="0"&&ch<="9");this.cursor--;var exponent=this.lexExponent();floating=floating||exponent;var str=input.substring(token.start,this.cursor);token.value=floating?parseFloat(str):parseInt(str)},lexDot:function(ch){var token=this.token,input=this.source,next=input[this.cursor];if(next>="0"&&next<="9"){do ch=input[this.cursor++];while(ch>="0"&&ch<="9");this.cursor--,this.lexExponent(),token.type=NUMBER,token.value=parseFloat(input.substring(token.start,this.cursor))}else token.type=DOT,token.assignOp=null,token.value="."},lexString:function(ch){var token=this.token,input=this.source;token.type=STRING;var hasEscapes=!1,delim=ch;if(input.length<=this.cursor)throw this.newSyntaxError("Unterminated string literal");while((ch=input[this.cursor++])!==delim){if(ch=="\n"||ch=="\r")throw this.newSyntaxError("Unterminated string literal");if(this.cursor==input.length)throw this.newSyntaxError("Unterminated string literal");if(ch==="\\"){hasEscapes=!0;if(++this.cursor==input.length)throw this.newSyntaxError("Unterminated string literal")}}token.value=hasEscapes?eval(input.substring(token.start,this.cursor)):input.substring(token.start+1,this.cursor-1)},lexRegExp:function(ch){var token=this.token,input=this.source;token.type=REGEXP;do{ch=input[this.cursor++];if(ch==="\\")this.cursor++;else if(ch==="["){do{if(ch===undefined)throw this.newSyntaxError("Unterminated character class");ch==="\\"&&this.cursor++,ch=input[this.cursor++]}while(ch!=="]")}else if(ch===undefined)throw this.newSyntaxError("Unterminated regex")}while(ch!=="/");do ch=input[this.cursor++];while(ch>="a"&&ch<="z");this.cursor--,token.value=eval(input.substring(token.start,this.cursor))},lexOp:function(ch){var token=this.token,input=this.source,node=opTokens[ch],next=input[this.cursor];next in node&&(node=node[next],this.cursor++,next=input[this.cursor],next in node&&(node=node[next],this.cursor++,next=input[this.cursor]));var op=node.op;definitions.assignOps[op]&&input[this.cursor]==="="?(this.cursor++,token.type=ASSIGN,token.assignOp=definitions.tokenIds[definitions.opTypeNames[op]],op+="="):(token.type=definitions.tokenIds[definitions.opTypeNames[op]],token.assignOp=null),token.value=op},lexIdent:function(ch,keywordIsName){var token=this.token,id=ch;while((ch=this.getValidIdentifierChar(!1))!==null)id+=ch;token.type=IDENTIFIER,token.value=id;if(keywordIsName)return;var kw;if(this.parser.mozillaMode){kw=definitions.mozillaKeywords[id];if(kw){token.type=kw;return}}if(this.parser.x.strictMode){kw=definitions.strictKeywords[id];if(kw){token.type=kw;return}}kw=definitions.keywords[id],kw&&(token.type=kw)},get:function(scanOperand,keywordIsName){var token;while(this.lookahead){--this.lookahead,this.tokenIndex=this.tokenIndex+1&3,token=this.tokens[this.tokenIndex];if(token.type!==NEWLINE||this.scanNewlines)return token.type}this.skip(),this.tokenIndex=this.tokenIndex+1&3,token=this.tokens[this.tokenIndex],token||(this.tokens[this.tokenIndex]=token={});var input=this.source;if(this.cursor>=input.length)return token.type=END;token.start=this.cursor,token.lineno=this.lineno;var ich=this.getValidIdentifierChar(!0),ch=ich===null?input[this.cursor++]:null;if(ich!==null)this.lexIdent(ich,keywordIsName);else if(scanOperand&&ch==="/")this.lexRegExp(ch);else if(ch in opTokens)this.lexOp(ch);else if(ch===".")this.lexDot(ch);else if(ch>="1"&&ch<="9")this.lexNumber(ch);else if(ch==="0")this.lexZeroNumber(ch);else if(ch==='"'||ch==="'")this.lexString(ch);else{if(!this.scanNewlines||ch!=="\n"&&ch!=="\r")throw this.newSyntaxError("Illegal token");ch==="\r"&&input[this.cursor]==="\n"&&this.cursor++,token.type=NEWLINE,token.value="\n",this.lineno++}return token.end=this.cursor,token.type},unget:function(){if(++this.lookahead===4)throw"PANIC: too much lookahead!";this.tokenIndex=this.tokenIndex-1&3},newSyntaxError:function(m){m=(this.filename?this.filename+":":"")+this.lineno+": "+m;var e=new SyntaxError(m,this.filename,this.lineno);return e.source=this.source,e.cursor=this.lookahead?this.tokens[this.tokenIndex+this.lookahead&3].start:this.cursor,e},getValidIdentifierChar:function(first){var input=this.source;if(this.cursor>=input.length)return null;var ch=input[this.cursor];if(ch==="\\"&&input[this.cursor+1]==="u"){try{ch=String.fromCharCode(parseInt(input.substring(this.cursor+2,this.cursor+6),16))}catch(ex){return null}this.cursor+=5}var valid=isValidIdentifierChar(ch,first);return valid&&this.cursor++,valid?ch:null}},exports.isIdentifier=isIdentifier,exports.Tokenizer=Tokenizer}),define("ace/narcissus/definitions",["require","exports","module"],function(require,exports,module){function defineGetter(obj,prop,fn,dontDelete,dontEnum){Object.defineProperty(obj,prop,{get:fn,configurable:!dontDelete,enumerable:!dontEnum})}function defineGetterSetter(obj,prop,getter,setter,dontDelete,dontEnum){Object.defineProperty(obj,prop,{get:getter,set:setter,configurable:!dontDelete,enumerable:!dontEnum})}function defineMemoGetter(obj,prop,fn,dontDelete,dontEnum){Object.defineProperty(obj,prop,{get:function(){var val=fn();return defineProperty(obj,prop,val,dontDelete,!0,dontEnum),val},configurable:!0,enumerable:!dontEnum})}function defineProperty(obj,prop,val,dontDelete,readOnly,dontEnum){Object.defineProperty(obj,prop,{value:val,writable:!readOnly,configurable:!dontDelete,enumerable:!dontEnum})}function isNativeCode(fn){return typeof fn=="function"&&fn.toString().match(/\[native code\]/)}function apply(f,o,a){return Fpapply.call(f,[o].concat(a))}function getPropertyDescriptor(obj,name){while(obj){if({}.hasOwnProperty.call(obj,name))return Object.getOwnPropertyDescriptor(obj,name);obj=Object.getPrototypeOf(obj)}}function getPropertyNames(obj){var table=Object.create(null,{});while(obj){var names=Object.getOwnPropertyNames(obj);for(var i=0,n=names.length;i<n;i++)table[names[i]]=!0;obj=Object.getPrototypeOf(obj)}return Object.keys(table)}function getOwnProperties(obj){var map={};for(var name in Object.getOwnPropertyNames(obj))map[name]=Object.getOwnPropertyDescriptor(obj,name);return map}function blacklistHandler(target,blacklist){var mask=Object.create(null,{}),redirect=Dict.create(blacklist).mapObject(function(name){return mask});return mixinHandler(redirect,target)}function whitelistHandler(target,whitelist){var catchall=Object.create(null,{}),redirect=Dict.create(whitelist).mapObject(function(name){return target});return mixinHandler(redirect,catchall)}function mixinHandler(redirect,catchall){function targetFor(name){return hasOwn(redirect,name)?redirect[name]:catchall}function getMuxPropertyDescriptor(name){var desc=getPropertyDescriptor(targetFor(name),name);return desc&&(desc.configurable=!0),desc}function getMuxPropertyNames(){var names1=Object.getOwnPropertyNames(redirect).filter(function(name){return name in redirect[name]}),names2=getPropertyNames(catchall).filter(function(name){return!hasOwn(redirect,name)});return names1.concat(names2)}function enumerateMux(){var result=Object.getOwnPropertyNames(redirect).filter(function(name){return name in redirect[name]});for(name in catchall)hasOwn(redirect,name)||result.push(name);return result}function hasMux(name){return name in targetFor(name)}return{getOwnPropertyDescriptor:getMuxPropertyDescriptor,getPropertyDescriptor:getMuxPropertyDescriptor,getOwnPropertyNames:getMuxPropertyNames,defineProperty:function(name,desc){Object.defineProperty(targetFor(name),name,desc)},"delete":function(name){var target=targetFor(name);return delete target[name]},fix:function(){},has:hasMux,hasOwn:hasMux,get:function(receiver,name){var target=targetFor(name);return target[name]},set:function(receiver,name,val){var target=targetFor(name);return target[name]=val,!0},enumerate:enumerateMux,keys:enumerateMux}}function makePassthruHandler(obj){return{getOwnPropertyDescriptor:function(name){var desc=Object.getOwnPropertyDescriptor(obj,name);return desc.configurable=!0,desc},getPropertyDescriptor:function(name){var desc=getPropertyDescriptor(obj,name);return desc.configurable=!0,desc},getOwnPropertyNames:function(){return Object.getOwnPropertyNames(obj)},defineProperty:function(name,desc){Object.defineProperty(obj,name,desc)},"delete":function(name){return delete obj[name]},fix:function(){return Object.isFrozen(obj)?getOwnProperties(obj):undefined},has:function(name){return name in obj},hasOwn:function(name){return{}.hasOwnProperty.call(obj,name)},get:function(receiver,name){return obj[name]},set:function(receiver,name,val){return obj[name]=val,!0},enumerate:function(){var result=[];for(name in obj)result.push(name);return result},keys:function(){return Object.keys(obj)}}}function hasOwn(obj,name){return hasOwnProperty.call(obj,name)}function Dict(table,size){this.table=table||Object.create(null,{}),this.size=size||0}function Stack(elts){this.elts=elts||null}var tokens=["END","\n",";",",","=","?",":","CONDITIONAL","||","&&","|","^","&","==","!=","===","!==","<","<=",">=",">","<<",">>",">>>","+","-","*","/","%","!","~","UNARY_PLUS","UNARY_MINUS","++","--",".","[","]","{","}","(",")","SCRIPT","BLOCK","LABEL","FOR_IN","CALL","NEW_WITH_ARGS","INDEX","ARRAY_INIT","OBJECT_INIT","PROPERTY_INIT","GETTER","SETTER","GROUP","LIST","LET_BLOCK","ARRAY_COMP","GENERATOR","COMP_TAIL","IMPLEMENTS","INTERFACE","LET","MODULE","PACKAGE","PRIVATE","PROTECTED","PUBLIC","STATIC","USE","YIELD","IDENTIFIER","NUMBER","STRING","REGEXP","break","case","catch","const","continue","debugger","default","delete","do","else","export","false","finally","for","function","if","import","in","instanceof","new","null","return","switch","this","throw","true","try","typeof","var","void","while","with"],strictKeywords={__proto__:null,"implements":!0,"interface":!0,let:!0,"package":!0,"private":!0,"protected":!0,"public":!0,"static":!0,use:!0,yield:!0},statementStartTokens=["break","const","continue","debugger","do","for","if","let","return","switch","throw","try","var","yield","while","with"],whitespaceChars=["	","","\f"," "," ","﻿"," ","᠎"," "," "," "," "," "," "," "," "," "," "," "," "," ","　"],whitespace={};for(var i=0;i<whitespaceChars.length;i++)whitespace[whitespaceChars[i]]=!0;var opTypeNames={"\n":"NEWLINE",";":"SEMICOLON",",":"COMMA","?":"HOOK",":":"COLON","||":"OR","&&":"AND","|":"BITWISE_OR","^":"BITWISE_XOR","&":"BITWISE_AND","===":"STRICT_EQ","==":"EQ","=":"ASSIGN","!==":"STRICT_NE","!=":"NE","<<":"LSH","<=":"LE","<":"LT",">>>":"URSH",">>":"RSH",">=":"GE",">":"GT","++":"INCREMENT","--":"DECREMENT","+":"PLUS","-":"MINUS","*":"MUL","/":"DIV","%":"MOD","!":"NOT","~":"BITWISE_NOT",".":"DOT","[":"LEFT_BRACKET","]":"RIGHT_BRACKET","{":"LEFT_CURLY","}":"RIGHT_CURLY","(":"LEFT_PAREN",")":"RIGHT_PAREN"},keywords={__proto__:null},mozillaKeywords={__proto__:null},tokenIds={},hostSupportsEvalConst=function(){try{return eval("(function(s) { eval(s); return x })('const x = true;')")}catch(e){return!1}}(),consts=hostSupportsEvalConst?"const ":"var ";for(var i=0,j=tokens.length;i<j;i++){i>0&&(consts+=", ");var t=tokens[i],name;if(/^[a-z]/.test(t)){name=t.toUpperCase();if(name==="LET"||name==="YIELD")mozillaKeywords[name]=i;strictKeywords[name]&&(strictKeywords[name]=i),keywords[t]=i}else name=/^\W/.test(t)?opTypeNames[t]:t;consts+=name+" = "+i,tokenIds[name]=i,tokens[t]=i}consts+=";";var isStatementStartCode={__proto__:null};for(i=0,j=statementStartTokens.length;i<j;i++)isStatementStartCode[keywords[statementStartTokens[i]]]=!0;var assignOps=["|","^","&","<<",">>",">>>","+","-","*","/","%"];for(i=0,j=assignOps.length;i<j;i++)t=assignOps[i],assignOps[t]=tokens[t];var Fpapply=Function.prototype.apply,applyNew;Function.prototype.bind?applyNew=function(f,a){return new(f.bind.apply(f,[,].concat(Array.prototype.slice.call(a))))}:applyNew=function applyNew(f,a){switch(a.length){case 0:return new f;case 1:return new f(a[0]);case 2:return new f(a[0],a[1]);case 3:return new f(a[0],a[1],a[2]);default:var argStr="a[0]";for(var i=1,n=a.length;i<n;i++)argStr+=",a["+i+"]";return eval("new f("+argStr+")")}};var hasOwnProperty={}.hasOwnProperty;Dict.create=function(table){var init=Object.create(null,{}),size=0,names=Object.getOwnPropertyNames(table);for(var i=0,n=names.length;i<n;i++){var name=names[i];init[name]=table[name],size++}return new Dict(init,size)},Dict.prototype={has:function(x){return hasOwnProperty.call(this.table,x)},set:function(x,v){hasOwnProperty.call(this.table,x)||this.size++,this.table[x]=v},get:function(x){return this.table[x]},getDef:function(x,thunk){return hasOwnProperty.call(this.table,x)||(this.size++,this.table[x]=thunk()),this.table[x]},forEach:function(f){var table=this.table;for(var key in table)f.call(this,key,table[key])},map:function(f){var table1=this.table,table2=Object.create(null,{});return this.forEach(function(key,val){table2[key]=f.call(this,val,key)}),new Dict(table2,this.size)},mapObject:function(f){var table1=this.table,table2=Object.create(null,{});return this.forEach(function(key,val){table2[key]=f.call(this,val,key)}),table2},toObject:function(){return this.mapObject(function(val){return val})},choose:function(){return Object.getOwnPropertyNames(this.table)[0]},remove:function(x){hasOwnProperty.call(this.table,x)&&(this.size--,delete this.table[x])},copy:function(){var table=Object.create(null,{});for(var key in this.table)table[key]=this.table[key];return new Dict(table,this.size)},keys:function(){return Object.keys(this.table)},toString:function(){return"[object Dict]"}};var _WeakMap=typeof WeakMap=="function"?WeakMap:function(){function WeakMap(array){this.array=array||[]}function searchMap(map,key,found,notFound){var a=map.array;for(var i=0,n=a.length;i<n;i++){var pair=a[i];if(pair.key===key)return found(pair,i)}return notFound()}return WeakMap.prototype={has:function(x){return searchMap(this,x,function(){return!0},function(){return!1})},set:function(x,v){var a=this.array;searchMap(this,x,function(pair){pair.value=v},function(){a.push({key:x,value:v})})},get:function(x){return searchMap(this,x,function(pair){return pair.value},function(){return null})},"delete":function(x){var a=this.array;searchMap(this,x,function(pair,i){a.splice(i,1)},function(){})},toString:function(){return"[object WeakMap]"}},WeakMap}();Stack.prototype={push:function(x){return new Stack({top:x,rest:this.elts})},top:function(){if(!this.elts)throw new Error("empty stack");return this.elts.top},isEmpty:function(){return this.top===null},find:function(test){for(var elts=this.elts;elts;elts=elts.rest)if(test(elts.top))return elts.top;return null},has:function(x){return Boolean(this.find(function(elt){return elt===x}))},forEach:function(f){for(var elts=this.elts;elts;elts=elts.rest)f(elts.top)}},Array.prototype.copy||defineProperty(Array.prototype,"copy",function(){var result=[];for(var i=0,n=this.length;i<n;i++)result[i]=this[i];return result},!1,!1,!0),Array.prototype.top||defineProperty(Array.prototype,"top",function(){return this.length&&this[this.length-1]},!1,!1,!0),exports.tokens=tokens,exports.whitespace=whitespace,exports.opTypeNames=opTypeNames,exports.keywords=keywords,exports.mozillaKeywords=mozillaKeywords,exports.strictKeywords=strictKeywords,exports.isStatementStartCode=isStatementStartCode,exports.tokenIds=tokenIds,exports.consts=consts,exports.assignOps=assignOps,exports.defineGetter=defineGetter,exports.defineGetterSetter=defineGetterSetter,exports.defineMemoGetter=defineMemoGetter,exports.defineProperty=defineProperty,exports.isNativeCode=isNativeCode,exports.apply=apply,exports.applyNew=applyNew,exports.mixinHandler=mixinHandler,exports.whitelistHandler=whitelistHandler,exports.blacklistHandler=blacklistHandler,exports.makePassthruHandler=makePassthruHandler,exports.Dict=Dict,exports.WeakMap=_WeakMap,exports.Stack=Stack}),define("ace/narcissus/options",["require","exports","module"],function(require,exports,module){exports.hiddenHostGlobals={Narcissus:!0},exports.desugarExtensions=!1,exports.allowHTMLComments=!1,exports.mozillaMode=!0,exports.parenFreeMode=!1})